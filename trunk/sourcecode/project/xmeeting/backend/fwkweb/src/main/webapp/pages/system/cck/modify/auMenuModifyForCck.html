<style type="text/css"> 
.auMenuModifyForCckpageFormContent p	{
 
width: 100%;}
</style>
<script type="text/javascript">
	//通过tab url得到行主键，获取信息，自动填充form表单
	
	$(function() {
		

		var param =  $.pdialog.getCurrent().data("param");
		if(param && param != ""){
			param = DWZ.jsonEval(param);   
// 			logger.info("param--->"+param.oper);
// 			logger.info("param--->"+param.id);
// 			logger.info("param--->"+param.pId);
			aumenu_dialog_init(param);
		}

	});

	
	
	function aumenu_dialog_init(param){
		var form =findDialogName("aumenudialogForCckform");
		var url = CPATH.domain_1 + "/pages/system/cck/modify/auMenuLookup.html";
		form.attr("action",getURL(CPATH.domain_1, "/rs/aumenu/saveinfo"));
		var menuAction="/rs/cckRedirector/gridOrTree/"+param.sctGuid+"?sctGuid="+param.sctGuid;
		findDialogName("menuAction").val(menuAction);
		findDialogName("menuAction").data("menuAction",menuAction);
		findDialogName("lookUpAuMenuForCckCreateMenubtnLook").attr("href",url);
		findDialogName("menuTitle").val("navTab_"+param.sctGuid);
		findDialogName("menuName").val(  param.name);
// 		findDialogName("menuAction").val(menuAction);
// 		findDialogName("menuAction").val(menuAction);
// 		findDialogName("menuAction").val(menuAction);
// 		findDialogName("menuAction").val(menuAction);
		
// 		if("add"==param.oper){
// 			var formparam={};
// 			formparam.menuId=param.id;
// 			formparam.parentid=param.id;
// 			formparam.domainName=param.domainName;
// 			formparam.oper=param.oper;
// 			form.populate2(formparam);
// 		}else if("modify"==param.oper){
// 			param.parentid=param.parentId;
// 			form.populate2(param);
// 		}else if("clone"==param.oper){
// 			param.parentid=param.parentId; 
// 			form.populate2(param);
// 		}
	}

	
	 
	function aumenu_dialog_save_for_Cck(){
		var $form = getJqueryForm(findDialogName("aumenudialogForCckform",$.pdialog.getCurrent()));
		if (!$form.valid()) {
			return false;
		}
		doPostAjax(getURL(CPATH.domain_1, "/rs/aumenu/saveinfo"), $form.serializeArray() ,
			function(data) { 
					$.pdialog.close($.pdialog.getCurrent());	 
					aumenu_initTreeZNodes();
		});
	}
	function setBringBackAuMenuForCckCreateMenu(id,authorityId){
		 $('[name="parentid"]',$(".auMenuModifyForCckpageFormContent")).val(id);
		 var $menuAction= $('[name="menuAction"]',$(".auMenuModifyForCckpageFormContent"));
		 var url=$menuAction.data("menuAction");
		 $menuAction.val(url+"&authid="+authorityId);
		 
	}
	function auMenuModifyForCckDialogAjaxDone(json){
		json.callbackType="closeCurrent";
		dialogAjaxDone(json);
		
	}
</script>
<div class="pageContent">
	<form name="aumenudialogForCckform" method="post" class="required-validate pageForm" onsubmit="return validateCallback(this, auMenuModifyForCckDialogAjaxDone);">
 		<input name="oper" type="hidden" value="add"  />
		<div class="pageFormContent auMenuModifyForCckpageFormContent" layoutH="50">
			<p><label>主健:</label>    <input name="menuId" type="text" value="" class="required digits" maxLength=36  domain="1"  formData="formData" validateRemote="/rs/validate/auMenuId/"   /></p><br/>
			<p><label>菜单名:</label>    <input name="menuName" type="text" value=""  class="required" /></p><br/>
			<p><label>对应的url:</label>    <input name="menuAction" type="text" value="" style="width:333px;" readonly="readonly"/></p><br/>
			<p><label>对应权限ID:</label>  <input name="authorityId" type="text" value="Test001"  /></p><br/>
			<p><label>父菜单id:</label> 
			
			
					 <a name="lookUpAuMenuForCckCreateMenubtnLook" class="btnLook" href="javascript:lookUpAuMenuForCckCreateMenu_showDialog();"
							lookupGroup="line" width="400" height="500">选择父菜单</a> 
			 <input name="parentid" class="required" type="text" value="" style="width:200px;"   />
			
			 </p><br/>
			<p><label>菜单是否可用 :</label>  <input name="isDisplay" type="text" value="1" /></p><br/> 
			<p><label>排序字段 :</label>  <input name="menuOrder" type="text" value="" /></p><br/> 
			<p><label>菜单类型 :</label>  <input name="menuType" type="text" value="0" /></p><br/> 
			<p><label>DWZ Tab ID :</label>  <input name="menuTitle" type="text" style="width:333px;" value="" size=60/></p><br/> 
			<p><label>域信息 :</label>  <input name="domainName" type="text" value="1" readonly="readonly" /></p><br/> 
			<p><label>是否删除 :</label>  <input name="delFlag" type="text" value="0" /></p><br/> 
		</div>
		<div class="formBar">
			<ul>
				<li>
					<div class="buttonActive">
						<div class="buttonContent">
							<button type="submit"  >
								保存
							</button>
						</div>
					</div>
				</li>
				<li>
					<div class="button">
						<div class="buttonContent">
							<button type="button" class="close">
								关闭
							</button>
						</div>
					</div>
				</li>
			</ul>
		</div>
	</form>
</div>