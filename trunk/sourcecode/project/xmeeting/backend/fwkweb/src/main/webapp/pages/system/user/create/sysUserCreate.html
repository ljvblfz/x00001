<h2 class="contentTitle" name="showTitle">新增用户</h2>
<form name="sysUserForm" method="post" class="required-validate pageForm" action="">

		<input type="hidden" name="navTabId" value="sysUser" />
		<input type="hidden" name="callbackType" value="closeCurrent" />
		<input type="hidden" name="callBackMethod" value="sysUserSearch" />
	<div class="pageFormContent" layoutH="97">
			<p>
				<label>员工工号:</label>
				<input type="text" name="username" class="required" size="30" maxlength="20"  onchage="setUserId(this.value)" onblur="setUserId(this.value)"/>
				<!--<a class="btnLook" href="javascript:;" onclick="selectSysUser()">选择</a>-->
			</p>
			<p>
				<label>用户全名:</label>
				<input type="text" name="fullname" class="required" size="30" maxlength="20"/>
			</p>
			<p>
				<label>登陆账号:</label>
				<input type="text" name="userid" class="required" size="30" maxlength="20" readonly="readonly"/>
			</p>
			<p>
				<label>邮箱地址:</label>
				<input type="text" name="email"  size="30" maxlength="20"  />
			</p>
			<p>
				<label>办公电话:</label>
				<input type="text" name="telephone"  size="30" maxlength="20" />
			</p>
			<p>
				<label>移动电话:</label>
				<input type="text" name="mobilephone"  size="30" maxlength="20" />
			</p>
			<p>
				<label>入职日期:</label>
				<input type="text" name="workedTime" class="required date" size="30" maxlength="20"/>
			</p>
			<p>
				<label>任职部门:</label>
				<input type="text" name="regNum"  size="30" maxlength="20" />
			</p>
			<p>
				<label>邮箱大小:</label>
				<input type="text" name="mailsize"  size="30" maxlength="20" value="10"/>M
			</p>
			<p>
				<label>排序:</label>
				<input type="text" name="orderid"  size="30" maxlength="20" value="1"/>
			</p>			
			<p style="width:100%">
				<label>备注:</label>
				<textarea rows="5" cols="90" name="memo"></textarea>
			</p>
	</div>
			
	<div class="formBar">
		<ul>
			<li><div class="button"><div class="buttonContent"><button type="button" onclick="submitSysUserForm()">保存</button></div></div></li>
			<li><div class="button"><div class="buttonContent"><button type="button" class="close">关闭</button></div></div></li>
		</ul>
	</div>
</form>
<script type="text/javascript">
	//通过tab url得到行主键，获取信息，自动填充form表单
	$(function(){	
		findName("sysUserForm").attr('action',CPATH.domain_1 + '/rs/sysUser');
	});
	
	function setUserId(value){
		findName("userid").val(value);	
	}
	function selectSysUser(){
		
		var opts={
			href:CPATH.domain_1+"/pages/system/user/hrStaffrecords.html",
			title:"用户信息",
			showloading:'f',
			width:700,
			height:400,
			rel:'selectSysUser',
			mask:true,
		};
		openDialog(opts);
	}
	
	function submitSysUserForm(){
		var form = findName("sysUserForm");
		var username = findName("username",form).val();
		if(username!=""){
			doGetAjax(CPATH.domain_1 + "/rs/sysUser/" +username ,null,function(data){
				if(data.user){
					alertMsg.error("该用户名已存在！");
				}else{

					validateCallback(form, navTabAjaxDone);
				}			
			});
		}else{
			validateCallback(form, navTabAjaxDone);
		}
		
	}
</script>