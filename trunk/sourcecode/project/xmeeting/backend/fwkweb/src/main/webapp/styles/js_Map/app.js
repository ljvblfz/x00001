/*SOSO Map API beta 1.0.120322.1 @Tencent Research*/
__MapNSImpl__={};__MapNS__={};
__MapNSImpl__.Config={DEFAULT_LNG:116.39712896958922,DEFAULT_LAT:39.9165275426627,DEFAULT_ZOOMLEVEL:9,EARTH_RADIUS:6378137,zoomMin:4,zoomMax:18,resolution:[156543.03,78271.516,39135.758,19567.879,9783.939,4891.9697,2445.9849,1222.9924,611.4962,305.7481,152.87405,76.43703,38.218513,19.109257,9.554628,4.777314,2.388657,1.1943285,0.597164283477939],scope:[0,0,0,0,0,3,0,3,0,3,0,3,0,7,0,7,0,15,0,15,0,31,0,31,0,63,4,59,0,127,12,115,0,225,28,227,356,455,150,259,720,899,320,469,1440,1799,650,929,2880,3589,
1200,2069,5760,7179,2550,3709,11520,14349,5100,7999,23060,28689,10710,15429,46120,57369,20290,29849,89990,124729,41430,60689,184228,229827,84169,128886],QueryType:{POI:"poi",SYN:"syn",RN:"rn",BUSLS:"busls",BUS:"bus",DT:"dt",DTS:"dts",GEOC:"geoc",RGEOC:"rgeoc",GC:"gc",NAV:"nav",WALK:"walk",POS:"pos",SG:"sg"},SERVICE_URL:"http://api.map.qq.com/"};
(function(){var c=null;try{throw Error("Get Script Url");}catch(s){c=s.fileName||s.sourceURL;if(!c&&s.stack)c=!window.opera?(s.stack.match(/at\s+(.*):\d+/)||[null,null])[1]:(s.stack.match(/@(.*):\d+/)||[null,null])[1];if(!c){var q=document.getElementsByTagName("script"),f=[],t,i;t=0;for(i=q.length;t<i;t++){var l=q[t].src;if(l.indexOf("Config.js")!=-1||l.indexOf("app.js")!=-1)f.push(l)}if(f.length===1)c=f[0];else{t=0;for(i=f.length;t<i;t++)if(f[t].indexOf("map.soso.com")!=-1){c=f[t];break}}}}q="";
if(c){q=c.substring(0,c.lastIndexOf("/"));if(q.indexOf("common")!==-1)q=c.substring(0,q.lastIndexOf("/"));if(/MSIE (\d+(\.\d+)?)/.test(navigator.userAgent))if(parseFloat(RegExp.$1)===6&&q.indexOf("localhost")>0)q="http://"+document.domain+"/"+q}__MapNSImpl__.Config.domain=q+"/"})();(function(){__MapNSImpl__.Interfaces={registInterface:function(c,s){for(var q={},f=0,t=s.length;f<t;f++)q[s[f]]=null;__MapNSImpl__.Interfaces[c]=q}};__MapNSImpl__.Class=function(){for(var c=function(){this.initialize&&this.initialize.apply(this,arguments)},s={},q,f,t=0,i=arguments.length;t<i;++t){f=arguments[t];if(typeof f=="function"){if(t==0&&i>1){q=f.prototype.initialize;f.prototype.initialize=function(){};s=function(){};s.prototype=f.prototype;s=new s;if(q)f.prototype.initialize=q;else delete f.prototype.initialize}q=
f.prototype}else{q=f;q.initialize&&(c=q.initialize,delete q.initialize)}__MapNSImpl__.Synchronize.copy(s,q)}s.constructor=c;c.prototype=s;return c};__MapNSImpl__.Synchronize={fill:function(c,s){if(c){for(var q in s)if(q!=="prototype"&&s.hasOwnProperty(q)&&c[q]===undefined)c[q]=s[q];return c}else return s},copy:function(c,s){if(!s||!c)throw Error("You must provide an object to copy from and to");for(var q in s)c[q]=s[q]}}})();(function(c){function s(a,g,m,w){if(g<m){var v;v=w(a[m]);for(var A=g-1,C=g;C<m;C++)if(w(a[C])<=v){A++;var B=a[C];a[C]=a[A];a[A]=B}B=a[A+1];a[A+1]=a[m];a[m]=B;v=A+1;s(a,g,v-1,w);s(a,v+1,m,w)}}function q(a){a=a||window.event;c.Event.stopEvent(a);return false}!window.console&&(window.console={},console.log=function(){});var f={};__MapNSImpl__.Util=f;f.Browser=function(){var a=navigator.userAgent,g=0,m=0,w=0,v=0,A=0,C=0,B=0,x=0,u=0;if(/opera\/(\d+\.\d)/i.test(a))m=+RegExp.$1;else if(/msie (\d+\.\d)/i.test(a))g=
document.documentMode||+RegExp.$1;else if(/firefox\/(\d+\.\d)/i.test(a))v=+RegExp.$1;else if(/netscape(\s|\/)(\d+(\.\d+)?)/i.test(a))C=+RegExp.$1;else if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&!/android/i.test(a))w=+(RegExp.$1||RegExp.$2);else if(/chrome\/(\d+\.\d)/i.test(a))A=+RegExp.$1;else if(/android\s(\d+\.\d)/i.test(a))B=+RegExp.$1;else if(/iPad.*OS\s(\d[_\d]*)/i.test(a))x=+parseFloat(RegExp.$1.replace(/_/g,"."));else if(/iphone\sOS\s(\d[_\d]*)/i.test(a))u=
+parseFloat(RegExp.$1.replace(/_/g,"."));else/(BlackBerry).*Version\/([\d.]+)/.test(a)&&parseFloat(RegExp.$1);var r=function(){return{ie:g,firefox:v,netscape:C,opera:m,safari:w,chrome:A,android:B,iphone:u,ipad:x,gecko:/gecko/i.test(a)&&!/like gecko/i.test(a),webkit:/webkit/i.test(a),isSupportTouch:"ontouchstart"in window||x||u||B}};try{return r}finally{r=null}}();f.OS=function(){var a=navigator.userAgent;a={windows:/\(Windows;/i.test(a),mac:/\(Mac;/i.test(a),linux:/; Linux/i.test(a),iPhone:/\(iPhone;/i.test(a),
iPod:/\(iPod;/i.test(a),iPad:/\(iPad;/i.test(a),android:/android/i.test(a)};a.iOS=a.iPhone||a.iPod||a.iPad;a.isMobile=a.iOS||a.android;return a};f.sortByGetter=function(a,g){return s(a,0,a.length-1,g)};var t=null;f.removeNode=function(a){if(f.Browser().ie){c.Event.clearListeners(a);t||(t=document.createElement("div"));t.appendChild(a);t.innerHTML=""}else a&&a.parentNode&&a.parentNode.removeChild(a)};var i=[],l=[];f.fetchImage=function(a,g){var m,w,v=false;m=0;for(w=i.length;m<w;++m)if(i[m].url===
a){g(i[m].width,i[m].height,a,i[m].image);return i[m].image}m=0;for(w=l.length;m<w;m++)if(l[m].url===a){l[m].callbacks.push(g);v=true}if(!v){l.push({url:a,callbacks:[g]});var A=new Image,C=function(B,x){for(var u=0;u<l.length;u++)if(l[u].url===x){for(var r=l[u].callbacks,b=0;b<r.length;b++)r[b](B.width,B.height,x,B);l.splice(u,1);break}};m=c.Event;m.addDomListenerOnce(A,"load",function(){i.push({url:a,width:A.width,height:A.height,image:A});C(A,a);A=null});m.addDomListenerOnce(A,"error",function(){i.push({url:a,
width:0,height:0,image:A});g(0,0,a);C(A,a);A=null});a.indexOf("?");A.src=a;return A}};f.setSize=function(a,g){if(g.getWidth){a.style.width=g.getWidth()+"px";a.style.height=g.getHeight()+"px"}else{a.style.width=g[0]+"px";a.style.height=g[1]+"px"}};f.setPosition=function(a,g){if(g.getX){a.style.left=Math.floor(g.getX())+"px";a.style.top=Math.floor(g.getY())+"px"}else{a.style.left=Math.floor(g[0])+"px";a.style.top=Math.floor(g[1])+"px"}};f.setDomCoord=function(a,g){var m=a.style;(g[0]||g[0]===0)&&(m.left=
g[0]+"px");(g[1]||g[1]===0)&&(m.top=g[1]+"px");(g[2]||g[2]===0)&&(m.width=g[2]+"px");(g[3]||g[3]===0)&&(m.height=g[3]+"px")};f.getChildNodesByTag=function(a,g){var m=[];for(a=a.firstChild;a;){a.tagName.toLowerCase()===g&&m.push(a);a=a.nextSibling}return m};f.getCssSpriteImage=function(a,g,m,w,v){var A=function(C,B,x,u){C.width=x;C.height=u;if(f.Browser().ie&&f.Browser().ie<=6){if(B.toUpperCase().indexOf(".PNG")>0)C.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=scale, src="'+
B+'"'}else C.src=B;C.style.display=""};if(!m){m=document.createElement("img");if(!w){m.style.cssText="-moz-user-select:none;-khtml-user-select:none;";m.unselectable="on";w=c.Event;w.addDomListener(m,"selectstart",q);w.addDomListener(m,"dragstart",q)}m.style.position="absolute";m.src=__MapNSImpl__.Config.domain+"imgs/transparent.gif"}(function(C,B,x){C.className="csssprite";C.style.display="none";if(x){var u=x.getWidth();x=x.getHeight();A(C,B,u,x)}else f.fetchImage(B,function(r,b){A(C,B,r,b)})})(m,
a,v);m.style.left=-g[0]+"px";m.style.top=-g[1]+"px";return m};f.setCssSprite=function(a,g,m,w,v){if(f.Browser().ie&&f.Browser().ie<=6){if(a.style.position!="relative"&&a.style.position!="absolute")a.style.position="relative";a.style.background="";a.style.overflow="hidden";for(var A=a.childNodes,C=null,B=0,x=A.length;B<x;++B)if(A[B].className=="csssprite"){C=A[B];break}C=f.getCssSpriteImage(g,m,C,w,v);if(!C.parentNode){a.innerHTML="";a.appendChild(C)}}else{g&&(a.style.backgroundImage="url("+g+")");
a.style.backgroundPosition=-m[0]+"px "+-m[1]+"px"}};f.getMouseXY=function(a){var g=[];if(f.Browser().ie)g=[a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)];else if(a.touches){g=null;if(a.targetTouches.length>0)g=a.targetTouches[0];else if(a.changedTouches.length>0)g=a.changedTouches[0];g=[g.pageX,g.pageY]}else g=[a.pageX,a.pageY];return g};f.getDomCoordinate=function(a){var g=f.Browser();if(a.parentNode===
null||a.style.display=="none")return[0,0,0,0];var m=null,w=0,v=0,A=a.offsetWidth,C=a.offsetHeight;if(a.getBoundingClientRect&&!g.isSupportTouch){g=a.getBoundingClientRect();a=Math.max(document.documentElement.scrollTop,document.body.scrollTop);w=g.left+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);v=g.top+a}else{if(document.getBoxObjectFor){g=document.getBoxObjectFor(a);w=a.style.borderLeftWidth?parseInt(a.style.borderLeftWidth):0;m=a.style.borderTopWidth?parseInt(a.style.borderTopWidth):
0;w=g.x-w;v=g.y-m}else{w=a.offsetLeft;v=a.offsetTop;m=a.offsetParent;if(m!=a)for(;m;){w+=m.offsetLeft;v+=m.offsetTop;m=m.offsetParent}if(g.opera||g.safari&&a.style.position=="absolute"){w-=document.body.offsetLeft;v-=document.body.offsetTop}}for(m=a.parentNode?a.parentNode:null;m&&m.tagName!="BODY"&&m.tagName!="HTML";){w-=m.scrollLeft;v-=m.scrollTop;m=m.parentNode?m.parentNode:null}}return[w,v,A,C]};f.getStyle=function(a,g,m){if(!a)return null;if(document.defaultView&&m){g=g.replace(/[A-Z]/g,function(v){return"-"+
v.toLowerCase()});try{return document.defaultView.getComputedStyle(a,null).getPropertyValue(g)}catch(w){return null}}g=g.replace(/-(\D)/g,function(v,A){return A.toUpperCase()});if(g=="float")g=f.Browser().ie?"styleFloat":"cssFloat";if(a.currentStyle&&m)return a.currentStyle[g];return a.style?a.style[g]:undefined};f.getSize=function(a){var g,m;g=f.getStyle(a,"width");m=f.getStyle(a,"height");if(g.indexOf("px")===-1)g=0;if(m.indexOf("px")===-1)m=0;return{width:parseInt(g)||a.offsetWidth||a.clientWidth,
height:parseInt(m)||a.offsetHeight||a.clientHeight}};f.toCamelCase=function(){var a={};return function(g){if(a[g])return a[g];else{g=g.replace(/([A-Z]+)/g,function(m,w){return w.substr(0,1).toUpperCase()+w.toLowerCase().substr(1,w.length)}).replace(/[\-_\s](.)/g,function(m,w){return w.toUpperCase()});return a[g]=g}}}();f.setStyle=function(a,g,m){var w;a=typeof a==="string"?document.getElementById(a):a;if(typeof g==="string")if(m)a.style.cssText=g;else{m=g.split(";");for(w=0;w<m.length;w++){var v=
f.toCamelCase(m[w]);a.style[v]=g[A]}}else{if(m)a.style.cssText="";for(var A in g)if(g.hasOwnProperty(A))if(m)w+=A+":"+g[A]+";";else{v=f.toCamelCase(A);a.style[v]=g[A]}if(m)a.style.cssText=w}return a};f.getMouseCoordinate=function(a){var g=[];if(f.Browser().ie)g=[a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)];else if(a.touches){g=null;if(a.targetTouches.length>0)g=a.targetTouches[0];else if(a.changedTouches.length>
0)g=a.changedTouches[0];g=[g.pageX,g.pageY]}else g=[a.pageX,a.pageY];return g};f.topLeft=function(a){a=a instanceof String?document.getElementById(a):a;if(!a)throw"You have not provided a valid element to topLeft()";return{x:a.style.left?parseInt(a.style.left,10):0,y:a.style.top?parseInt(a.style.top,10):0}};f.centerChangedFixDisplayBBox=function(a,g){if(g!==undefined&&g!==null){if(a.lng<g[0])a.lng=g[0];else if(a.lng>g[2])a.lng=g[2];if(a.lat<g[1])a.lat=g[1];else if(a.lat>g[3])a.lat=g[3]}};f.isCenterInDisplayBBox=
function(a,g,m){var w=false;if(m!==undefined&&m!==null){if(a>m[0]&&g>m[1]&&a<m[2]&&g<m[3])w=true}else w=true;return w};f.setPositionByAlign=function(a,g,m,w){if(a){var v=a.style,A=m.getWidth();m=m.getHeight();var C=g%3;g=Math.floor(g/3);var B=Math.floor(a.offsetWidth/2);a=Math.floor(a.offsetHeight/2);if(C===1){v.left=w?Math.floor(w.offsetWidth/2)+"px":"50%";v.marginLeft=A-B+"px"}if(g===1){v.top=w?Math.floor(w.offsetHeight/2)+"px":"50%";v.marginTop=m-a+"px"}if(C===2){v.right=A+"px";v.left=""}if(C===
0){v.left=A+"px";v.right=""}if(g===0){v.top=m+"px";v.bottom=""}if(g===2){v.bottom=m+"px";v.top=""}}};var p={TOP_LEFT:0,TOP:1,TOP_RIGHT:2,LEFT:3,CENTER:4,RIGHT:5,BOTTOM_LEFT:6,BOTTOM:7,BOTTOM_RIGHT:8};p.isTop=function(a){return a<3};p.isMiddle=function(a){return a>2&&a<6};p.isBottom=function(a){return a>5};p.isLeft=function(a){return a%3==0};p.isCenter=function(a){return a%3==1};p.isRight=function(a){return a%3==2};f.forEach=function(a,g,m){if(a)if(a.length){m=0;for(var w=a.length;m<w;++m)g(m,a[m])}else for(w in a)if(m||
!a.hasOwnProperty||a.hasOwnProperty(w))g(w,a[w])};f.callback=function(a,g,m){m=m||[];return function(){for(var w=m.concat(),v=0;v<arguments.length;v++)w.push(arguments[v]);g&&g.apply(a,w)}};f.copyObject=function(a,g,m){f.forEach(a,function(w){g[w]=a[w]},m)};var e={};f.capitalInitial=function(a){return e[a]||(e[a]=a.substr(0,1).toUpperCase()+a.substr(1))};var d,k=(new Date).getTime();__MapNSImpl__.debug={write:function(){for(var a=[],g=0,m=arguments.length;g<m;g++)if(arguments[g]&&arguments[g].length)a=
a.concat(arguments[g]);else a.push(arguments[g]);a.join(", ");g=document.createElement("div");g.style.cssText="border-bottom:1px dashed #e0ecff;line-height:12px;padding:2px 0;height:12px;";g.innerHTML='<xmp style="margin:0 80px 0 0;float:left;">'+a+"</xmp>";a=document.createElement("div");a.style.cssText="float:right;";d=(new Date).getTime();a.innerHTML=d-k+" ms";k=d;g.appendChild(a);var w=document.getElementById("__debug"),v=document.getElementById("__debug_content");if(!w){w=document.createElement("div");
w.id="__debug";w.style.cssText="position:fixed;*position:absolute;bottom:0;left:2%;width:96%;height:100px;overflow:hidden;z-index:100000;background:#99c661;font-size:11px;";document.body.appendChild(w);a=document.createElement("div");a.style.cssText="height:16px;line-height:16px;background:#88b752;position:relative;";a.innerHTML='<span style="margin-left:5px;color:white;font-weight:bold;">Logs</span>';m=document.createElement("span");m.style.cssText="color:white;cursor:pointer;position:absolute;right:45px;text-decoration:underline;";
m.innerHTML="Clear";var A=c.Event;A.addDomListener(m,"click",function(){v.innerHTML=""});var C=document.createElement("span");C.style.cssText="color:white;cursor:pointer;position:absolute;right:45px;text-decoration:underline;";C.style.right="10px";C.innerHTML="Hide";A.addDomListener(C,"click",function(){if(C.innerHTML=="Hide"){C.innerHTML="Show";w.style.height="16px"}else{C.innerHTML="Hide";w.style.height="100px"}});a.appendChild(m);a.appendChild(C);v=document.createElement("div");v.id="__debug_content";
v.style.cssText="height:80px;overflow:auto;background:#99c661;margin:2px 5px;color:#333333;";w.appendChild(a);w.appendChild(v)}w.style.display="";v.appendChild(g);v.scrollTop=v.scrollHeight},clear:function(){document.getElementById("__debug_content").innerHTML=""}};f.lngFrom4326ToProjection=function(a){return a*111319.49077777778};f.latFrom4326ToProjection=function(a){a=Math.log(Math.tan((90+a)*0.008726646259971648))/0.017453292519943295;a*=111319.49077777778;return a};f.lngFromProjectionTo4326=function(a){return a/
111319.49077777778};f.latFromProjectionTo4326=function(a){a=a/111319.49077777778;return a=Math.atan(Math.exp(a*0.017453292519943295))*114.59155902616465-90};f.wrapXY=function(a,g){var m;if(g<0){m=g%a;g=m!==0?a+m:0}else g=g>=a?g%a:g;return g};f.getOptimalZoomLevel=function(a,g,m,w){var v=a.getSouthWest(),A=a.getNorthEast();a=f.lngFrom4326ToProjection(A.getLng())-f.lngFrom4326ToProjection(v.getLng());v=f.latFrom4326ToProjection(A.getLat())-f.latFrom4326ToProjection(v.getLat());for(A=__MapNSImpl__.Config.zoomMax;A>=
0;A--){var C=w.getResolution(A);if(a/C.x<=g+1&&v/C.y<=m+1)break}A=Math.max(A,__MapNSImpl__.Config.zoomMin);return A=Math.min(A,__MapNSImpl__.Config.zoomMax)};f.getSeedTileIndex=function(a,g){var m;m=a.getLng();var w=a.getLat(),v=Math.pow(2,g+7),A=v*2;w=Math.min(Math.max(Math.sin(w*(Math.PI/180)),-0.9999),0.9999);m=[v+m*(A/360),v-0.5*Math.log((1+w)/(1-w))*(A/(2*Math.PI))];return[m[0],m[1]]};var j=[],o=[];f.startDrag=function(a,g,m,w){for(var v=f.getMouseCoordinate(w),A=j.length;A--;)if(j[A][0]==g&&
j[A][1]==m)return;j.push([g,m,v,a]);w.mousePageX=v[0];w.mousePageY=v[1];m.dragstart&&m.dragstart(w,a)};f.stopDrag=function(a,g,m){for(var w=0,v;v=j[w];w++)if(v[0]===a&&v[3]===g){m&&v[1].dragend(m);j.splice(w,1);w--}};f.enableDrag=function(a,g,m,w){var v,A=false,C=c.Event,B=function(n){A=true;if(g.setCapture){g.setCapture();v=C.addDomListener(g,"losecapture",h)}if(n.button!==2)if(n.touches&&n.touches.length>1){n=0;for(var y;y=j[n];n++)if(y[0]==g){j.splice(n,1);n--}}else{y=f.getMouseCoordinate(n);C.stopEvent(n);
j.push([g,m,y,a]);n.mousePageX=y[0];n.mousePageY=y[1];m.dragstart&&m.dragstart(n)}};a.length||(a=[a]);for(var x=0;x<a.length;x++)if(f.Browser().isSupportTouch)C.addDomListener(a[x],"touchstart",B);else{C.addDomListener(a[x],"mousedown",B);C.addDomListener(a[x],"selectstart",function(n){C.stopEvent(n)})}B=false;x=0;for(var u=o.length;x<u;x++)if(o[x]==g)B=true;if(!B){o.push(g);var r=null,b=function(n,y){n=n||window.event;var z=f.getMouseCoordinate(n);n.mousePageX=z[0];n.mousePageY=z[1];for(var D=0,
F;F=j[D];D++)if(F[0]==g){var E=[z[0]-F[2][0],z[1]-F[2][1]];if(y){F[1].dragging&&F[1].dragging(n,E,true);F[1].dragend&&F[1].dragend(n,E);j.splice(D,1);D--}else F[1].dragging&&F[1].dragging(n,E)}r=null};w=w||0;B=function(n){if(!(f.Browser().isSupportTouch&&!A))if(!(r&&w!=0)){b(n);w!=0&&(r=window.setTimeout(function(){r=null},w))}};var h=function(n){A=false;if(g.releaseCapture){g.releaseCapture();C.removeListener(v)}b(n,true)};if(f.Browser().isSupportTouch){C.addDomListener(g,"touchmove",B);C.addDomListener(g,
"touchend",h)}else{C.addDomListener(g,"mousemove",B);C.addDomListener(g,"mouseup",h)}}};f.RPCRequest=function(a,g){var m=document.createElement("script");m.type="text/javascript";m.charset="utf-8";if(f.Browser().ie&&f.Browser().ie<9)m.onreadystatechange=function(){if(m.readyState==="loaded"||m.readyState==="complete")g&&g()};else m.onload=function(){g&&g()};var w=document.getElementsByTagName("head")[0];if(!w)w=document.body;m.src=a;w.appendChild(m)};f.adapter=function(a,g){return function(m){g.call(a,
m,this)}};f.setCursorStyle=function(a,g,m){if(g.indexOf(",")>0){g=g.split(",");for(m=0;m<g.length;m++)if(f.setCursorStyle(a,g[m]))return true;return false}try{m=m||"auto";if(g.toLowerCase().indexOf(".cur")>0)g="url("+g+"),"+m;g=g.toLowerCase();if(g=="hand"&&!f.Browser().ie)g="pointer";a.style.cursor=g;return true}catch(w){return false}};f.setUnSelectable=function(a){if(f.Browser().ie||window.opera){var g=c.Event;a.unselectable="on";g.addDomListener(a,"selectstart",f.falseFunction);g.addDomListener(a,
"dragstart",f.falseFunction)}else{a.style.MozUserSelect="none";a.style.WebkitUserSelect="none"}};f.falseFunction=function(a){c.Event.stopEvent(a);return false};f.setOpacity=function(a,g){if(a){a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+parseInt(g*100)+")";a.style.MozOpacity=g;a.style.opacity=g}};f.isHtmlControl=function(a){var g=document.createElement("div");if(typeof a==="string"||typeof a==="number")return false;try{g.appendChild(a.cloneNode(true));return a.nodeType==1?true:
false}catch(m){return a==window||a==document}};f.parseCoords=function(a){a=a.split(",");for(var g=a.length,m=2;m<g;m++)a[m]=(parseFloat(a[m-2])+parseFloat(a[m])/1E6).toFixed(6);a[0]=parseFloat(a[0],10).toFixed(6);a[1]=parseFloat(a[1],10).toFixed(6);g=[];for(m=0;m<a.length;m+=2)g.push(new c.LatLng(a[m+1],a[m]));return g};f.getNumberInRange=function(a,g,m){if(g!=null)a=Math.max(a,g);if(m!=null)a=Math.min(a,m);return a};f.getLoopNumber=function(a,g,m){if(a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)return g;
if(a>=g&&a<=m)return a;m-=g;return(a%m+m-g)%m+g};f.radianToDegree=function(a){return a/(Math.PI/180)};f.degreeToRadian=function(a){return a*(Math.PI/180)};f.isEquals=function(a,g){return Math.abs(a-g)<=1.0E-9};f.domReady=function(a,g){function m(){if(!A){A=true;a()}}var w={enableMozDOMReady:true};if(g)for(var v in g)w[v]=g[v];var A=false;if(f.Browser().ie){(function(){if(!A){try{document.documentElement.doScroll("left")}catch(C){setTimeout(arguments.callee,20);return}m()}})();window.attachEvent("onload",
m)}else{if(f.Browser().webkit&&f.Browser().webkit<525)(function(){A||(/loaded|complete/.test(document.readyState)?m():setTimeout(arguments.callee,0))})();else if(!f.Browser().firefox||f.Browser().firefox!=2||w.enableMozDOMReady)document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);m()},false);window.addEventListener("load",m,false)}};f.containsNode=function(a,g){return a.contains?a!=g&&a.contains(g):!!(a.compareDocumentPosition(g)&
16)};f.isInDocument=function(a){return a&&a.parentNode&&a.parentNode.nodeType!=11};f.pixelDistance=function(a,g){if(a&&g)return Math.round(Math.sqrt(Math.pow(a.getX()-g.getX(),2)+Math.pow(a.getY()-g.getY(),2)))};f.getSupportedProp=function(a){for(var g=document.documentElement,m=0;m<a.length;m++)if(typeof g.style[a[m]]=="string")return a[m]};f.setZIndex=function(a,g){a.style.zIndex=g};f.thinFunction=function(a,g){if(typeof g!=="function"||typeof a!=="number"||a<0)return g;var m=0,w=null;return function(){clearTimeout(w);
var v=this,A=+new Date;if(A-m>=a){m=A;return g.apply(v,arguments)}else{var C=arguments[0];if(!(C&&(window.Event==C.constructor||window.MouseEvent==C.constructor))){var B=[].slice.call(arguments,0);A=a-A+m;w=setTimeout(function(){g.apply(v,B);m=+new Date},A>15?A:15)}}}};c.ALIGN=p;window.log_=__MapNSImpl__.debug.write})(__MapNS__);__MapNSImpl__.RC={};__MapNSImpl__.RC.NavControl={zoomIn:"\u653e\u5927",zoomOut:"\u7f29\u5c0f",left:"\u5411\u5de6\u5e73\u79fb",right:"\u5411\u53f3\u5e73\u79fb",up:"\u5411\u4e0a\u5e73\u79fb",down:"\u5411\u4e0b\u5e73\u79fb",ruler:"\u5355\u51fb\u7f29\u653e",slide:"\u62d6\u52a8\u7f29\u653e"};__MapNSImpl__.RC.Control={};__MapNSImpl__.RC.Control.TencentText="&copy 2012 Tencent - GS(2012)6001\u53f7";__MapNSImpl__.RC.Control.DataText="\u5730\u56fe\u6570\u636e &copy 2011 Mapabc";
__MapNSImpl__.RC.Control.GotoHome="\u5230SOSO\u5730\u56fe\u9996\u9875";__MapNSImpl__.RC.Control.ScaleText=["1000\u516c\u91cc","1000\u516c\u91cc","1000\u516c\u91cc","1000\u516c\u91cc","500\u516c\u91cc","200\u516c\u91cc","200\u516c\u91cc","100\u516c\u91cc","50\u516c\u91cc","20\u516c\u91cc","10\u516c\u91cc","5\u516c\u91cc","2\u516c\u91cc","1\u516c\u91cc","500\u7c73","200\u7c73","200\u7c73","100\u7c73","50\u7c73"];
__MapNSImpl__.RC.PolyEditLabel={start:"\u8d77\u70b9",end:"\u5171",add:"\u5355\u51fb\u9f20\u6807\u6dfb\u52a0\u65b0\u70b9",remove:"\u79fb\u9664\u8be5\u70b9",destroyPolyline:"\u79fb\u9664\u8be5\u6298\u7ebf",destroyPolygon:"\u79fb\u9664\u8be5\u591a\u8fb9\u5f62",drag:"\u62d6\u62fd\u79fb\u52a8\u8be5\u70b9",dragNew:"\u62d6\u62fd\u6dfb\u52a0\u4e00\u4e2a\u65b0\u70b9",drawStart:"\u5355\u51fb\u9009\u62e9\u8d77\u70b9",drawCurrent:"\u5f53\u524d",drawing:"\u5355\u51fb\u5de6\u952e\u7ee7\u7eed\uff0c\u53cc\u51fb\u6216\u53f3\u952e\u7ed3\u675f"};
__MapNSImpl__.RC.Units={m:"\u7c73",km:"\u516c\u91cc",msec:"\u6beb\u79d2",sec:"\u79d2",min:"\u5206\u949f",hour:"\u5c0f\u65f6"};__MapNSImpl__.RC.Direction=["\u4e1c","\u4e1c\u5317","\u5317","\u897f\u5317","\u897f","\u897f\u5357","\u5357","\u4e1c\u5357"];__MapNSImpl__.RC.Transfer=["\u4e58\u5750","\u7ecf\u8fc7","\u7ad9","\u5230\u8fbe","\u7ec8\u70b9"];__MapNSImpl__.RC.MapType={ROADMAP:"\u5730\u56fe",SATELLITE:"\u536b\u661f",HYBRID:"\u8def\u7f51"};__MapNSImpl__.RC.LatLngOutOfRange="\u8bf7\u6c42\u7684\u7ecf\u7eac\u5ea6\u4e0d\u5728\u670d\u52a1\u5668\u652f\u6301\u7684\u8303\u56f4\u5185\uff0c\u8bf7\u91cd\u8bd5\uff01";(function(c){function s(j,o){var a;if(l.Browser().ie)a=q(j).__events_;else{j.__events_||(j.__events_={});a=j.__events_}a[o]||(a[o]={});return a[o]}function q(j){var o=d.eventObjects[j.__oid_];if(!o){j.__oid_=e++;o={__events_:{}};d.eventObjects[j.__oid_]=o}return o}function f(j,o){var a,g={};if(l.Browser().ie){if(a=q(j))g=a.__events_}else g=j.__events_||{};if(o)a=g[o]||{};else{a={};for(var m in g)l.copyObject(g[m],a)}return a}function t(j,o){o=o||[];if(Object.prototype.toString.apply(o)!=="[object Array]")o=
[o];if(j.target)return j.handler.apply(j.target,o);return null}function i(j){j.bindHandler=function(o){if((o=o||window.event)&&!o.target)try{o.target=o.srcElement}catch(a){}var g=t(j,[o]);if(o&&o.type==="click")if((o=o.srcElement)&&o.tagName&&o.tagName==="A"&&o.href==="javascript:void(0)")return false;return g};return j.bindHandler}var l=__MapNSImpl__.Util,p=0,e=0,d={};d.listeners={};d.eventObjects={};var k=__MapNSImpl__.Class({className:"EventListener",initialize:function(j,o,a,g){this.target=j;
this.eventName=o;this.handler=a;this.type=g;this.bindHandler=null;this.id=p++;s(j,o)[this.id]=this;if(l.Browser().ie)d.listeners[this.id]=this},remove:function(){if(this.target){switch(this.type){case 1:this.target.removeEventListener(this.eventName,this.handler,false);break;case 4:this.target.removeEventListener(this.eventName,this.handler,true);break;case 2:this.target.detachEvent("on"+this.eventName,this.bindHandler);break;case 3:this.target["on"+this.eventName]=null}delete s(this.target,this.eventName)[this.id];
delete d.listeners[this.id];this.target=this.handler=null}}});d.addListener=function(j,o,a,g){a=l.callback(j,a,g);return new k(j,o,a,0)};d.addListenerOnce=function(j,o,a,g){var m=null;return m=d.addListener(j,o,function(){a.apply(j,arguments);m&&m.remove();m=null},g)};d.removeListener=function(j){j&&j.remove()};d.clearListeners=function(j,o){l.forEach(f(j,o),function(a,g){g&&g.remove()})};d.trigger=function(j,o,a){l.forEach(f(j,o),function(g,m){m&&t(m,a)})};d.addDomListener=function(j,o,a,g){a=l.callback(j,
a,g);if(j.addEventListener){g=false;if(o==="focusin"){o="focus";g=true}else if(o==="focusout"){o="blur";g=true}var m=g?4:1;j.addEventListener(o,a,g);a=new k(j,o,a,m)}else if(j.attachEvent){if(o==="mouseover"&&(!j.tagName||j.tagName.toLowerCase()!=="area"))o="mouseenter";else if(o==="mouseout"&&(!j.tagName||j.tagName.toLowerCase()!=="area"))o="mouseleave";a=new k(j,o,a,2);j.attachEvent("on"+o,i(a))}else{j["on"+o]=a;a=new k(j,o,a,3)}return a};d.addDomListenerOnce=function(j,o,a,g){var m=null;return m=
d.addDomListener(j,o,function(){a.apply(j,arguments);m&&m.remove();m=null},g)};d.stopEvent=function(j){d.preventDefault(j);d.stopPropagation(j)};d.preventDefault=function(j){j=j||window.event;j.returnValue=false;j.preventDefault&&j.preventDefault()};d.stopPropagation=function(j){j=j||window.event;j.cancelBubble=true;j.stopPropagation&&j.stopPropagation()};d.bindDom=function(j,o,a,g){g=l.adapter(a,g);return d.addDomListener(j,o,g)};d.bind=function(j,o,a,g){return d.addListener(j,o,l.adapter(a,g))};
d.unload=function(){var j=d.listeners,o;for(o in j)j[o].remove();d.listeners=null;d.eventObjects=null;(j=window.CollectGarbage)&&j()};c.Event=d})(__MapNS__);(function(c){function s(d,k,j,o,a){q(d)[k]={target:j,key:o};a||a||t(d,k)}function q(d){!d.hasOwnProperty("accessors_")&&(d.accessors_={});return d.accessors_}function f(d){!d.hasOwnProperty("bindings_")&&(d.bindings_={});return d.bindings_}function t(d,k){var j=k+p;d[j]?d[j]():d.changed(k);l.trigger(d,k.toLowerCase()+p)}var i=__MapNSImpl__.Util,l=c.Event,p="_changed",e=__MapNSImpl__.Class({initialize:function(){var d={};this.set=function(k,j){var o=q(this)[k];if(o){var a=o.target;o=o.key;var g="set"+
i.capitalInitial(o);a[g]?a[g](j):a.set(o,j)}else{a=d[k];d[k]=j;t(this,k,a)}};this.get=function(k){var j=q(this)[k];if(j){k=j.target;j=j.key;var o="get"+i.capitalInitial(j);return k[o]?k[o]():k.get(j)}else return d[k]}},setValues:function(d){for(var k in d){var j=d[k],o="set"+q(k);this[o]?this[o](j):this.set(k,j)}},notify:function(d){var k=q(this);if(k.hasOwnProperty(d)){d=k[d];d.target.notify(d.key)}else t(this,d)},bindTo:function(d,k,j,o){j=j||d;this.__checker__=this.__checker__||{};if(this.__checker__[d]!==
this.__checker__[j])throw Error("Can not bind properties of different type.");this.unbind(d);var a=j.toLowerCase()+p,g=this;f(this)[d]=l.addListener(k,a,function(){t(g,d)});s(this,d,k,j,o)},bindsTo:function(d,k,j,o){j=j||[];for(var a=0,g=d.length;a<g;a++)this.bindTo(d[a],k,j[a]||null,o)},unbind:function(d){var k=f(this)[d];if(k){delete f(this)[d];l.removeListener(k);k=this.get(d);delete q(this)[d];this[d]=k}},unbinds:function(d){for(var k=0,j=d.length;k<j;k++)this.unbind(d[k])},changed:function(){}});
e.publicProperties=function(d,k){i.forEach(k,function(j){var o="get"+i.capitalInitial(j);d.prototype[o]=function(){return this.get(j)};o="set"+i.capitalInitial(j);d.prototype[o]=function(a){var g=k[j];if(g&&!g(a))throw Error("Invalid value or type for property <"+(j+(">: "+a)));this.set(j,a)}})};e.prototype.setOptions=e.prototype.setValues;e.union=function(){var d=arguments,k=d.length;return function(){for(var j=0;j<k;++j)if(d[j].apply(this,arguments))return true;return false}};e.checkers={isNull:function(d){return d===
null||d===undefined},isBoolean:function(d){return d===!!d},isArray:function(d){return Object.prototype.toString.apply(d)==="[object Array]"},isObject:function(d){return Object.prototype.toString.apply(d)==="[object Object]"},isString:function(d){return typeof d==="string"},isHtmlControl:function(d){return i.isHtmlControl(d)},isNumber:function(d){return typeof d==="number"&&(d||d===0)},checkInterface:function(d){return function(k){var j=true,o;for(o in d)if(d.hasOwnProperty(o)&&k&&typeof k[o]!=="function")j=
false;return j}},isInstanceOf:function(d){return function(k){return k instanceof d}}};e.checkers.isBoolOrNull=e.union(e.checkers.isBoolean,e.checkers.isNull);e.checkers.isStringOrNull=e.union(e.checkers.isString,e.checkers.isNull);e.checkers.isNumberOrNull=e.union(e.checkers.isNumber,e.checkers.isNull);e.checkers.checkInterfaceOrNull=e.union(e.checkers.checkInterfaces,e.checkers.isNull);e.checkers.isInstanceOfOrNull=e.union(e.checkers.isInstanceOf,e.checkers.isNull);c.MVCObject=e})(__MapNS__);(function(c){__MapNSImpl__.Interfaces.registInterface("Point",["getX","getY","equals"]);var s=__MapNSImpl__.Class({initialize:function(q,f){this.x=q-0;this.y=f-0},getX:function(){return this.x},getY:function(){return this.y},equals:function(q){return this.getX()===q.getX()&&this.getY()===q.getY()},add:function(q){var f=this.clone();f.x+=q.x;f.y+=q.y;return f},multiplyBy:function(q){return new s(this.x*q,this.y*q)},subtract:function(q){var f=this.clone();f.x-=q.x;f.y-=q.y;return f},lerp:function(q,
f){f=Math.min(1,f);f=Math.max(0,f);var t=1-f;return new s(this.x*t+q.x*f,this.y*t+q.y*f)},clone:function(){return new s(this.x,this.y)},midpoint:function(q){return new s((this.x+q.x)*0.5,(this.y+q.y)*0.5)},toString:function(){return this.getX()+", "+this.getY()}});c.Point=s})(__MapNS__);(function(c){function s(q,f,t,i){this.red=q;this.green=f;this.blue=t;this.alpha=parseInt(i)>=0?i:1}s.prototype={toRGB:function(){return"rgb("+[this.red,this.green,this.blue].join(",")+")"},toRGBA:function(){return"rgba("+[this.red,this.green,this.blue,this.alpha].join(",")+")"},toHex:function(){return"#"+(16777216+(this.red<<16)+(this.green<<8)+this.blue).toString(16).slice(1)},toInt:function(){return this.red<<16|this.green<<8|this.blue},toString:function(){return this.toRGBA()}};s.fromHex=function(q){if(q.substring(0,
1)==="#")q=q.substr(1);var f=q.length===3?1:2,t=q.substr(0*f,f),i=q.substr(1*f,f);q=q.substr(2*f,f);if(f===1){t+=t;i+=i;q+=q}t=parseInt(t,16);i=parseInt(i,16);q=parseInt(q,16);return new s(t,i,q,1)};c.Color=s})(__MapNS__);(function(c){__MapNSImpl__.Interfaces.registInterface("Size",["getWidth","getHeight","equals"]);c.Size=__MapNSImpl__.Class({initialize:function(s,q){this.width=s;this.height=q},getWidth:function(){return this.width},getHeight:function(){return this.height},equals:function(s){return this.getWidth()===s.getWidth()&&this.getHeight()===s.getHeight()},toString:function(){return this.getWidth()+", "+this.getHeight()}})})(__MapNS__);(function(c){var s=c.Point,q=__MapNSImpl__.Class({initialize:function(f){this.minX=this.minY=Number.MAX_VALUE;this.maxX=this.maxY=-Number.MAX_VALUE;if(f&&f.length){for(var t=[],i=[],l=f.length;l--;){t.push(f[l].x);i.push(f[l].y)}this.minX=Math.min.apply(Math,t);this.maxX=Math.max.apply(Math,t);this.minY=Math.min.apply(Math,i);this.maxY=Math.max.apply(Math,i)}this.min=new s(this.minX,this.minY);this.max=new s(this.maxX,this.maxY)},isEmpty:function(){return!(this.minX<this.maxX&&this.minY<this.maxY)},
equals:function(f){if(!f)return false;return this.minX==f.minX&&this.minY==f.minY&&this.maxX==f.maxX&&this.maxY==f.maxY},containsBounds:function(f){return f.minX>this.minX&&f.maxX<this.maxX&&f.minY>this.minY&&f.maxY<this.maxY},containsPoint:function(f){return f.x>=this.minX&&f.x<=this.maxX&&f.y>=this.minY&&f.y<=this.maxY},intersects:function(f){if(!(this.isEmpty()||f.isEmpty()))if(!(f.maxX<this.minX||f.minX>this.maxX||f.maxY<this.minY||f.minY>this.maxY)){var t=Math.min(this.maxX,f.maxX),i=Math.min(this.maxY,
f.maxY);return new q([new s(Math.max(this.minX,f.minX),Math.max(this.minY,f.minY)),new s(t,i)])}},getCenter:function(){return new s((this.minX+this.maxX)/2,(this.minY+this.maxY)/2)},extend:function(f){if(f){this.minX=Math.min(this.minX,f.x);this.maxX=Math.max(this.maxX,f.x);this.minY=Math.min(this.minY,f.y);this.maxY=Math.max(this.maxY,f.y)}this.min.x=this.minX;this.min.y=this.minY;this.max.x=this.maxX;this.max.y=this.maxY},toString:function(){return this.minX+","+this.minY+","+this.maxX+","+this.maxY}});
c.Bounds=q})(__MapNS__);(function(){function c(o){for(var a=0,g;g=p[a];a++)if(o===g[0])return g;return null}var s=__MapNS__.Event,q=__MapNS__.Point,f=__MapNSImpl__.Config,t=__MapNS__.MVCObject,i=__MapNSImpl__.Synchronize,l=__MapNSImpl__.Util,p=[],e=false,d=__MapNSImpl__.Class(t,{initialize:function(){t.apply(this);this.renderTime_=null},redraw:function(){var o=(new Date).getTime(),a=false;if(this.renderTime_){if(o-this.renderTime>100){this.renderTime=o;a=true}}else{this.renderTime=o;a=true}var g=this;if(a)g.render?g.render():
g.draw();else if(!this.renderTimer_)this.renderTimer_=setTimeout(function(){g.render?g.render():g.draw();delete g.renderTimer_},0)},triggerMouseEvent:function(o,a){a.latLng=this.getMouseLatLng(a);a.qLatLng=this.getMouseLatLng(a);var g=this.get("model_");g&&s.trigger(g,o,[a])},registMouseEvents:function(o,a){for(var g=this.get("model_"),m=0,w=a.length;m<w;m++){var v=function(x,u,r){return function(b){var h=u.get("map_")||u.get("map");if(x instanceof __MapNS__.Polyline&&b.__point__)h&&(b.latLng=h.fromPixelToLatLng(b.__point__));
else{var n=u.getMouseLatLng(b);b.latLng=n;b.qLatLng=n;b.qLngLat=n}h&&(b.point=h.fromLatLngToContainerPixel(b.latLng));if(r=="click"){var y={};i.copy(y,b);if(!x.clickTimer_)x.clickTimer_=setTimeout(function(){x.firstTouche&&(x.firstTouche=null);x.secondTouche&&(x.secondTouche=null);clearTimeout(x.clickTimer_);x.clickTimer_=null;x&&s.trigger(x,r,[y])},200)}else{if(r=="dblclick")if(x.clickTimer_){clearTimeout(x.clickTimer_);x.clickTimer_=null}x&&s.trigger(x,r,[b])}}};if(a[m]==="click"){c(g)||p.push([g,
false,null,false,this]);var A=function(x){return function(u){if(!(u.touches&&u.touches.length!==1)){var r=l.getMouseCoordinate(u),b=c(x);b[1]=false;b[2]=r;b[3]=u.button===2;v(b[0],b[4],"mousedown")(u)}}};l.Browser().isSupportTouch?s.addDomListener(o,"touchstart",A(g)):s.addDomListener(o,"mousedown",A(g));if(!e){e=true;A=function(x){for(var u=0,r;r=p[u];u++)if(r[2]&&!r[3]){var b=l.getMouseCoordinate(x);if(r[2][0]!==b[0]||r[2][1]!==b[1])r[1]=true}};var C=function(x){for(var u=0,r;r=p[u];u++){var b=
r[0].get("clickable")!==false;if(r[2]&&!r[1]&&b){b=l.getMouseCoordinate(x);if(r[0].firstTouche&&x.touches){r[0].secondTouche=new q(b[0],b[1]);if(l.pixelDistance(r[0].firstTouche,r[0].secondTouche)<20&&x.touches){r[0].firstTouche=null;r[0].secondTouche=null;v(r[0],r[4],"dblclick")(x);break}}else r[0].firstTouche=new q(b[0],b[1]);if(x.button===2)v(r[0],r[4],"rightclick")(x);else r[0].clickTimer_||v(r[0],r[4],"click")(x)}r[2]=null}},B=document;if(l.Browser().isSupportTouch){s.addDomListener(B,"touchmove",
A);s.addDomListener(B,"touchend",C)}else{s.addDomListener(B,"mousemove",A);s.addDomListener(B,"mouseup",C)}}}else s.addDomListener(o,a[m],v(g,this,a[m]))}},getMouseLatLng:function(o){var a=this.get("map_")||this.get("map");if(a)return a.fromContainerPixelToLatLng(this.getMouseContainerPixel(o));return null},getMouseContainerPixel:function(o){var a=this.get("map_")||this.get("map");if(a){o=l.getMouseCoordinate(o);a=a.get("mapContainer_");a=l.getDomCoordinate(a);return new q(o[0]-a[0],o[1]-a[1])}return null},
draw:function(){}}),k={},j=[];d.loadView=function(o,a){k[o]||(k[o]={status:0,models:[],view:null});switch(k[o].status){case 2:new k[o].view(a);break;case 0:k[o].status=1;k[o].models.push(a);var g="";if(f.loader)g="modules/"+o+"/";j.push(o);l.RPCRequest(f.domain+g+o+"View.js?v=1.0.120322",function(){var m=0,w=0,v=false;m=0;for(w=j.length;m<w;m++){var A=null,C=k[j[m]];if(j[m]===o){A=k[o];v=true}else if(v&&C.view&&C.status===3)A=C;if(A){A.status=2;C=0;for(var B=A.models.length;C<B;C++)new A.view(A.models[C])}if(!v&&
!k[j[m]].view){k[o].status=3;break}}});break;case 1:k[o].models.push(a)}};d.setView=function(o,a){k[o].view=a;if(k[o].status!==2)k[o].status=2};d.getView=function(o){return!!k[o].view};__MapNS__.MVCView=d})();(function(c){var s=c.Event,q=__MapNSImpl__.Class(c.MVCObject,{initialize:function(f){c.MVCObject.apply(this);this.elems=f||[];this.set("length",this.elems.length)},getAt:function(f){return this.elems[f]},forEach:function(f){for(var t=0,i=this.get("length");t<i;++t)if(f(this.elems[t],t)===false)break},setAt:function(f,t){this.elems.splice(f,0,t);this.set();this.set("length",this.elems.length);s.trigger(this,"insert_at",[f,t])},insertAt:function(f,t){this.elems.splice(f,0,t);this.set("length",this.elems.length);
s.trigger(this,"insert_at",[f,t])},removeAt:function(f){var t=this.elems[f];this.elems.splice(f,1);this.set("length",this.elems.length);s.trigger(this,"remove_at",[f,t]);return t},push:function(f){this.insertAt(this.elems.length,f);return this.elems.length},pop:function(f){if(f)for(var t=0;t<this.elems.length;t++)if(f==this.elems[t])return this.removeAt(t);return this.removeAt(this.elems.length-1)},exists:function(f){if(f)for(var t=0;t<this.elems.length;t++)if(f==this.elems[t])return true;return false},
getArray:function(){return this.elems}});c.MVCArray=q;c.MVCObject.publicProperties(q,{length:0})})(__MapNS__);(function(c){function s(){for(var e=(new Date).getTime(),d=0,k=f.length;d<k;d++){var j=f[d];if(j&&j.get("time_")){var o=j.get("current");if(o<0)break;var a=j.get("duration");j.get("fps");o>a&&(o=a);j.frame(o);if(o>=a){j.stop();break}j.set("current",(e-j.get("time_"))/1E3)}}}var q=c.Event,f=[],t=null,i=__MapNSImpl__.Util,l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,
1E3/60)}}(),p=function(e,d){function k(){if((new Date).getTime()-j>=d){e.call();j=(new Date).getTime()}o.value=l(k)}if(!window.requestAnimationFrame&&!window.webkitRequestAnimationFrame&&!window.oRequestAnimationFrame&&!window.msRequestAnimationFrame)return window.setInterval(e,d);var j=(new Date).getTime(),o={};o.value=l(k);return o};c.Animation=__MapNSImpl__.Class(c.MVCObject,{initialize:function(e){c.MVCObject.apply(this);e=e||{};e.duration=e.duration||0;e.fps=40;this.setValues(e)},prepare:function(){return true},
start:function(e){if(this.prepare()){this.stop(true);var d=this.get("fps");this.set("current",0.1/d);!e&&q.trigger(this,"start");this.set("status",1);f.push(this);this.set("time_",(new Date).getTime());t||(t=i.Browser().isSupportTouch?p(s,1E3/d):window.setInterval(s,1E3/d));s()}},stop:function(e){this.set("time_",null);for(var d=0,k=f.length;d<k;d++)if(f[d]===this){f.splice(d,1);break}if(f.length===0){if(i.Browser().isSupportTouch){if(t){d=t;k=d.value;window.cancelAnimationFrame?window.cancelAnimationFrame(k):
window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(k):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(k):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(k):clearInterval(d)}}else t&&window.clearInterval(t);t=null}this.set("status",0);this.set("current",-1);!e&&q.trigger(this,"end")},getStatus:function(){return this.get("status")},frame:function(){}});c.Animation.BOUNCE=0;c.Animation.DROP=1;c.Animation.JUMP=2;c.Animation.POP=
3;c.Fx=__MapNSImpl__.Class(c.Animation,{initialize:function(e){e=e||{};e.begins=e.begins||[];e.ends=e.ends||[];e.duration=e.duration||0;e.callback=e.callback||function(){};e.fps=e.fps||60;e.method=e.method||c.Fx.linear;c.MVCObject.apply(this);this.setValues(e)},isBeginEqualsEnd:function(){for(var e=this.get("begins"),d=this.get("ends"),k=true,j=0,o=e.length;j<o;j++)if(e[j]!==d[j]){k=false;break}return k},prepare:function(){return!this.isBeginEqualsEnd()},getValues:function(e){var d=this.get("begins"),
k=this.get("ends"),j=this.get("method"),o=this.get("duration"),a=[],g=[],m,w;m=0;for(w=d.length;m<w;++m){var v=k[m]-d[m],A;if(o!=0){A=j(e,d[m],v,o);var C=e-1/this.get("fps");C<0&&(C=0);v=A-j(C,d[m],v,o)}else{A=k[m];v=v}a.push(A);g.push(v)}return{values:a,steps:g}},frame:function(e){var d=this.getValues(e);e=d.steps;d=d.values;for(var k=true,j=0,o=e.length;j<o;j++)if(e[j]!==0){k=false;break}k||this.qFxFrame(d,e)},qFxFrame:function(e,d){var k=this.get("callback");k&&k(e,d)}});c.CssFx=__MapNSImpl__.Class(c.Fx,
{initialize:function(e){e=e||{};e.items=e.items||[];e.duration=e.duration||0;e.fps=e.fps||60;e.method=e.method||c.Fx.linear;c.MVCObject.apply(this);this.setValues(e)},prepare:function(){for(var e=this.get("items"),d=[],k=[],j=0,o=e.length;j<o;++j){var a=e[j];d=d.concat(a.begins);k=k.concat(a.ends)}this.set("begins",d);this.set("ends",k);return!this.isBeginEqualsEnd()},qFxFrame:function(e){for(var d=this.get("items"),k=0,j=0,o=d.length;j<o;++j){var a=d[j],g=a.styles,m=a.units;a=a.element;for(var w=
0,v=g.length;w<v;++w){a.style[g[w]]=parseInt(e[k],10)+m[w];k++}}}});c.Fx.linear=function(e,d,k,j){return k*e/j+d};c.Fx.easeInQuad=function(e,d,k,j){return k*(e/=j)*e+d};c.Fx.easeOutQuad=function(e,d,k,j){return-k*(e/=j)*(e-2)+d};c.Fx.easeInOutQuad=function(e,d,k,j){return(e/=j/2)<1?k/2*e*e+d:-k/2*(--e*(e-2)-1)+d};c.Fx.easeInCubic=function(e,d,k,j){return k*Math.pow(e/j,3)+d};c.Fx.easeOutCubic=function(e,d,k,j){return k*(Math.pow(e/j-1,3)+1)+d};c.Fx.easeInQuart=function(e,d,k,j){return k*(e/=j)*e*
e*e+d};c.Fx.easeOutQuart=function(e,d,k,j){return-k*((e=e/j-1)*e*e*e-1)+d};c.Fx.easeInOutCubic=function(e,d,k,j){return(e/=j/2)<1?k/2*Math.pow(e,3)+d:k/2*(Math.pow(e-2,3)+2)+d};c.Fx.easeInSine=function(e,d,k,j){return k*(1-Math.cos(e/j*(Math.PI/2)))+d};c.Fx.easeOutSine=function(e,d,k,j){return k*Math.sin(e/j*(Math.PI/2))+d};c.Fx.easeInOutSine=function(e,d,k,j){return k/2*(1-Math.cos(Math.PI*e/j))+d};c.Fx.easeInExpo=function(e,d,k,j){return k*Math.pow(2,10*(e/j-1))+d};c.Fx.easeOutExpo=function(e,d,
k,j){return k*(-Math.pow(2,-10*e/j)+1)+d};c.Fx.easeInOutExpo=function(e,d,k,j){return(e/=j/2)<1?k/2*Math.pow(2,10*(e-1))+d:k/2*(-Math.pow(2,-10*--e)+2)+d};c.Fx.easeInCirc=function(e,d,k,j){return k*(1-Math.sqrt(1-(e/=j)*e))+d};c.Fx.easeOutCirc=function(e,d,k,j){return k*Math.sqrt(1-(e/=j-1)*e)+d};c.Fx.easeInOutCirc=function(e,d,k,j){return(e/=j/2)<1?k/2*(1-Math.sqrt(1-e*e))+d:k/2*(Math.sqrt(1-(e-=2)*e)+1)+d};c.Fx.easeInOutBack=function(e,d,k,j,o){if(o==undefined)o=2;if((e/=j/2)<1)return k/2*e*e*(((o*=
1.525)+1)*e-o)+d;return k/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+d};c.Fx.easeInBack=function(e,d,k,j,o){if(o==undefined)o=20;return k*(e/=j)*e*((o+1)*e-o)+d};c.Fx.easeOutBack=function(e,d,k,j,o){if(o==undefined)o=20;return k*((e=e/j-1)*e*((o+1)*e+o)+1)+d}})(__MapNS__);(function(c){function s(){if(!k)for(var b=0,h=null;h=A[b++];)if(h.isSupported&&h.isSupported()){k=h;break}return k}function q(b){this.shapes=new o;this.container=b;var h=this,n=[];c.Event.addListener(this.shapes,"length_changed",function(){if(this.get("length")===0)h.disableEventListener(n);else n[0]||h.enableEventListener(n)})}function f(b){this.bridge=b;this._transformStack=[];this._flatness=3;this._lastY=this._lastX=0;this._arrY=this._arrX=null;this.isbegin=false}function t(){this.element=this.transform=
this.strokeDashStyle=this.strokeWidth=this.strokeColor=this.fillColor=null}function i(){this.container=this.element=this.pathData=this._transform=null}function l(b){this.container=b;this.element=document.createElement("canvas");this.element.width=0;this.element.height=0;this.element.style.position="absolute";this.element.style.pointerEvents="none";this._canvas=this.element.getContext("2d");this._commands=null}function p(){this.element=this.pathData=this.container=null}function e(b,h){this.x=b;this.y=
h}function d(b,h,n){this.points=b||[];this.bounds=null;this.pointsNum=b.length;this.childSegs=null;this.width=Math.max(h,d.Config.minBufferWidth);this.index=n||0}var k=null,j=c.MVCObject,o=c.MVCArray,a=__MapNSImpl__.Synchronize,g=__MapNSImpl__.Util,m=c.Color,w=c.Point,v=c.Bounds,A=[p,i,l];q.prototype={enableEventListener:function(b){for(var h=this.container,n=false,y=false,z=this,D=h;!D.offsetWidth;)D=D.parentNode;var F,E,G,J,I=c.Event.addDomListener(D,"mousemove",function(L){if(!y){F=g.getMouseCoordinate(L);
E=g.getDomCoordinate(h);G=new w(F[0]-E[0],F[1]-E[1]);J=z._checkPointInShapeBounds(G);if(n=J[0]?true:false)z._doMouseMove(L,G,J);else z.hoverShape&&z._triggerMouseOut(z.hoverShape,L)}});b.push(I);I=c.Event.addDomListener(D,"mouseout",function(L){var K=L.relatedTarget||L.toElement;if(z.hoverShape&&!g.containsNode(D,K)&&K!==D){y=true;z._triggerMouseOut(z.hoverShape,L)}});b.push(I);I=c.Event.addDomListener(D,"mouseover",function(){y=false});b.push(I);I=c.Event.addDomListener(h,"mousedown",function(L){z.hoverShape&&
c.Event.trigger(z.hoverShape,"mousedown",[L,z.hoverShape.linePoint])});b.push(I);I=c.Event.addDomListener(h,"mouseup",function(L){z.hoverShape&&c.Event.trigger(z.hoverShape,"mouseup",[L])});b.push(I);I=["click","dblclick"];for(var H=0,O=I.length;H<O;H++){var M=I[H];M=c.Event.addDomListener(h,M,function(L){return function(K){if(J)for(var N=0,Q;Q=J[N];N++)if(Q.mouseIn){c.Event.trigger(Q,L,[K,Q.linePoint]);L=="mouseup"&&K.button==2&&c.Event.trigger(Q,"contextmenu",[K,Q.linePoint])}}}(M));b.push(M)}},
disableEventListener:function(b){for(;b[0];)c.Event.removeListener(b.pop())},_doMouseMove:function(b,h,n){var y=this,z=null,D=null;n=n||this.shapes.getArray();h=[h.x,h.y];var F=null;g.forEach(n,function(E,G){if((F=G.isMouseIn(h))&&(!z||z.get("zIndex")<=G.get("zIndex"))){z=G;D=F}else G.mouseIn&&y._triggerMouseOut(G,b)});if(z&&D){b.__point__=new c.Point(D[0],D[1]);z.mouseIn||y._triggerMouseOver(z,b,D);y._triggerMouseMove(z,b,D)}else y.hoverShape&&y._triggerMouseOut(y.hoverShape,b)},_triggerMouseOver:function(b,
h,n){this.hoverShape&&this._triggerMouseOut(this.hoverShape,h);if(!b.mouseIn){b.mouseIn=true;b.linePoint=n;c.Event.trigger(b,"mouseover",[h,n])}if(!this.hoverShape)this.container.parentNode.style.cursor=b.get("cursor");this.hoverShape=b},_triggerMouseMove:function(b,h,n){b.linePoint=n;c.Event.trigger(b,"mousemove",[h,n])},_triggerMouseOut:function(b,h){if(b===this.hoverShape)this.hoverShape=null;if(this.container.parentNode.style.cursor!="")this.container.parentNode.style.cursor="";c.Event.trigger(b,
"mouseout",[h]);b.mouseIn=false;b.linePoint=null},_checkPointInShapeBounds:function(b){var h=[];this.shapes.forEach(function(n){n.bounds&&n.bounds.containsPoint(b)&&h.push(n)});return h},draw:function(b){var h=false;this.shapes.forEach(function(n){if(n===b){h=true;return false}});if(!h){this.shapes.push(b);b.get("canvas")!==this&&b.set("canvas",this)}},erase:function(b){if(b){var h=this.shapes,n=null;h.forEach(function(y,z){if(y===b){n=h.removeAt(z);return false}});n&&n.set("canvas",null)}},clear:function(){for(var b=
this.shapes,h=null;h=b.pop();)h.set("canvas",null)}};var C=__MapNSImpl__.Class(j,{initialize:function(){j.call(this);this.element=null;var b=new (s());this.graphics=new f(b);var h=this,n=false;b.ready(function(){if(!n){n=true;D&&D()}});if(!n){var y=0,z=this.render,D=function(){if(n){h.render=z;D=z=null;if(y>0){h.render();y=0}}else y++};h.render=D}},getShape:function(){return this.element},setDefaultOptions:function(b){var h={fillColor:new m(255,255,255,0.5),strokeColor:new m(23,145,252,1),strokeWidth:2,
strokeDashStyle:"solid",zIndex:0,transform:null,visible:true,cursor:""};b=a.fill(b,h);this.setOptions(b)},changed:function(b){b==="viewbox_"||b==="cursor"||(b==="strokeWeight"?this.set("strokeWidth",this.get("strokeWeight")):this.render())},visible_changed:function(){var b=this.get("visible");if(this.element)this.element.style.display=b?"":"none"},canvas_changed:function(){var b=this.get("canvas");if(b){b.draw(this);this.render();this._canvas=b}else if(this.element){this.graphics.clear();this.element=
null;if(this._canvas){this._canvas.erase(this);delete this._canvas}}},draw:function(){throw Error("subclasses must override the Shape.draw method");},isRender:function(){return true},isMouseIn:function(){return false},render:function(){var b=this.graphics,h=this.get("canvas");if(!(!b||!h||!this.isRender())){b.beginRender(h.container);if(h=this.get("fillColor")){var n=this.get("fillOpacity");if(typeof h==="string")h=m.fromHex(h);if(typeof n==="number")h.alpha=n}if(n=this.get("strokeColor")){var y=
this.get("strokeOpacity");if(typeof n==="string")n=m.fromHex(n);if(typeof y==="number")n.alpha=y}b.setFillColor(h);b.setStrokeColor(n);h=parseInt(this.get("strokeWidth"));b.setStrokeWidth(h);b.setStrokeDashStyle(this.get("strokeDashStyle"));this.draw(b);this.element=b.endRender(this.get("viewbox_"));this.notify("visible");this.bounds=b.getBounds();if(this.element&&this.element.nodeType)this.element.style.zIndex=this.get("zIndex")}}}),B=__MapNSImpl__.Class(C,{type:"path",initialize:function(b,h){C.call(this);
h=h||{};h.fillColor=null;h.points=b;var n=this;c.Event.addListener(this,"points_changed",function(){n._arrSegNode=null});this.setDefaultOptions(h)},getCacheSegs_:function(){var b=this._arrSegNode;if(!b){var h=this.get("points");if(h){b=[];for(var n=0,y=h.length;n<y;n++)b.push(new d(h[n],this.get("strokeWidth")))}this._arrSegNode=b}return b},isMouseIn:function(b){if(this.get("canvas")){var h=this.getCacheSegs_();if(h){var n=null;b=new w(b[0],b[1]);for(var y=0;y<h.length;y++)if(n=h[y].getPointOnLine(b))break;
return n}}},draw:function(b){if(b){var h=this.get("points");if(h)for(var n=0,y=h.length;n<y;n++)for(var z=0,D=h[n],F=D.length;z<F;z++)b[!z?"movetoAbs":"linetoAbs"](D[z][0],D[z][1])}}}),x=__MapNSImpl__.Class(C,{type:"circle",initialize:function(b,h,n){C.call(this);n=n||{};n.center=b;n.radius=h;this.setDefaultOptions(n)},isMouseIn:function(b){var h=this.get("center"),n=this.get("radius");return!this.get("canvas")||!h||!n?false:Math.sqrt(Math.pow(Math.abs(b[0]-h[0]),2)+Math.pow(Math.abs(b[1]-h[1]),2))<=
n?b:false},draw:function(b){if(b){var h=this.get("center"),n=this.get("radius");if(!h||!n)b.movetoAbs(0,0);else{var y=h[0]+n,z=h[0]-n;b.movetoAbs(z,h[1]);b.arcAbs(n,n,0,1,0,y,h[1]);b.arcAbs(n,n,0,1,0,z,h[1])}}}}),u=__MapNSImpl__.Class(C,{type:"area",initialize:function(b,h){C.call(this);h=h||{};h.points=b;var n=this;c.Event.addListener(this,"points_changed",function(){n._segNode=null});this.setDefaultOptions(h)},getCacheSeg_:function(){var b=this._segNode;if(!b){var h=this.get("points");if(h){h=h[0];
h.push([h[0][0],h[0][1]]);b=new d(h,this.get("strokeWidth"))}this._segNode=b}return b},isMouseIn:function(b){var h=this.get("points");if(!this.get("canvas")||!h)return false;else{h=h[0];for(var n=false,y=null,z=b[0],D=b[1],F=-1,E=h.length,G=E-1;++F<E;G=F)(h[F][1]<=D&&D<h[G][1]||h[G][1]<=D&&D<h[F][1])&&z<(h[G][0]-h[F][0])*(D-h[F][1])/(h[G][1]-h[F][1])+h[F][0]&&(n=!n);if(!n)if(h=this.getCacheSeg_())y=h.getPointOnLine(new w(b[0],b[1]));return n?b:y||false}},draw:function(b){if(b){var h=this.get("points");
if(h){for(var n=0,y=h.length;n<y;n++)for(var z=0,D=h[n],F=D.length;z<F;z++)b[!z?"movetoAbs":"linetoAbs"](D[z][0],D[z][1]);b.closePath()}}}});f.prototype._hasMethod=function(b){return this.bridge!=null&&typeof this.bridge[b]==="function"};f.prototype._invoke=function(b){if(this._hasMethod(b))if(arguments.length>2)throw Error("Graphics._invoke only supports one or two arguments");else return arguments.length==1?this.bridge[b]():this.bridge[b](arguments[1])};f.prototype.beginRender=function(b){if(!this.isbegin){this._lastY=
this._lastX=0;this._arrX=[];this._arrY=[];this.isbegin=true;return this._invoke("beginRender",b)}};f.prototype.endRender=function(b){if(this.isbegin){this.isbegin=false;var h=null;if(this._arrX.length){h=Math.min.apply(Math,this._arrX);var n=Math.max.apply(Math,this._arrX),y=Math.min.apply(Math,this._arrY),z=Math.max.apply(Math,this._arrY);h=new v([new w(h,y),new w(n,z)]);if(b)h=h.intersects(b);b=Math.max(20,this._strokeWidth);h.minX-=b;h.minY-=b;h.maxX+=b;h.maxY+=b}this._bounds=h;return this._invoke("endRender",
this._bounds)}};f.prototype.clear=function(){this._invoke("clear")};f.prototype.getBounds=function(){return this._bounds};f.prototype.renderPathData=function(b){var h=this.bridge;if(h!=null)if(this._hasMethod("renderPathData"))h.renderPathData(b);else{if(this._pathParser==null){this._pathParser=new PathParser;this._pathParser.setHandler(this)}this._pathParser.parseData(b)}};f.prototype.setFillColor=function(b){this._invoke("setFillColor",b)};f.prototype.setStrokeColor=function(b){this._invoke("setStrokeColor",
b)};f.prototype.setStrokeWidth=function(b){this._invoke("setStrokeWidth",b);this._strokeWidth=b};f.prototype.setStrokeDashStyle=function(b){this._invoke("setStrokeDashStyle",b)};f.prototype.arcAbs=function(b,h,n,y,z,D,F){var E=this.bridge;if(E!=null&&(this._lastX!=D||this._lastY!=F)){var G,J,I,H,O;if(b!=0||h!=0){var M=(this._lastX-D)*0.5;H=(this._lastY-F)*0.5;I=n*Math.PI/180;O=Math.cos(I);var L=Math.sin(I);I=M*O+H*L;M=M*-L+H*O;H=I*I;var K=M*M,N=H/(b*b)+K/(h*h);if(N>1){N=Math.sqrt(N);b*=N;h*=N}N=b*
b;var Q=h*h;K=N*K;H=Q*H;N=N*Q-K-H;K=N<1.0E-6?0:Math.sqrt(N/(K+H));if(y==z)K=-K;H=K*b*M/h;K=K*-h*I/b;G=H*O-K*L+(this._lastX+D)*0.5;J=H*L+K*O+(this._lastY+F)*0.5;L=new e(1,0);O=new e(I-H,M-K);M=new e(-I-H,-M-K);I=L.angleBetween(O);H=O.angleBetween(M);if(!z&&H>0)H-=360;else if(z&&H<0)H+=360;O=I+H}var P=function(V){return new w(G+Math.cos(V)*b,J+Math.sin(V)*h)},R=function(V,X){var Y=(V+X)*0.5,W=P(V),Z=P(Y),$=P(X),aa=e.fromPoints(W,Z);W=e.fromPoints(W,$);if(aa.perpendicular(W).length()>S){R(V,Y);T.push(Z);
R(Y,X)}else T.push(Z)},S=this._flatness;M=Math.PI/180;L=I*M;K=O*M;var T=[];M=P(L);T.push(M);R(L,K);L=P(K);T.push(L);if(this._hasMethod("arcTo"))E.arcTo(b,h,n,y,z,D,F);else if(n===0&&this._hasMethod("arcToByRect")){n=G-b;y=J-h;H=G+b;N=J+h;M=Math.PI/180;L=I*M;K=O*M;M=P(L);I=P(K);E.arcToByRect(z,n,y,H,N,M.x,M.y,I.x,I.y)}else if(this._hasMethod("quadraticCurveTo")){if(I!=O){n=H>0?1:-1;z=n*45;y=n*Math.floor(H/45);Q=I*Math.PI/180;for(n=0;n<y;n++){L=(I+z)*Math.PI/180;N=b*Math.cos(Q)+G;K=h*Math.sin(Q)+J;
M=b*Math.cos(L)+G;H=h*Math.sin(L)+J;var U=(Q+L)*0.5;Q=b*Math.cos(U)+G;U=h*Math.sin(U)+J;N=2*(Q-0.25*N-0.25*M);K=2*(U-0.25*K-0.25*H);E.quadraticCurveTo(N,K,M,H);I+=z;Q=L}if(I!=O){L=O*Math.PI/180;N=b*Math.cos(Q)+G;K=h*Math.sin(Q)+J;M=b*Math.cos(L)+G;H=h*Math.sin(L)+J;U=(Q+L)*0.5;Q=b*Math.cos(U)+G;U=h*Math.sin(U)+J;N=2*(Q-0.25*N-0.25*M);K=2*(U-0.25*K-0.25*H);E.quadraticCurveTo(N,K,M,H)}}}else if(this._hasMethod("lineTo")){n=0;for(z=T.length;n<z;n++)E.lineTo(T[n].x,T[n].y)}n=0;for(z=T.length;n<z;n++){this._arrX.push(T[n].x);
this._arrY.push(T[n].y)}}this._lastX=D;this._lastY=F;this._lastCommand="A"};f.prototype.arcRel=function(b,h,n,y,z,D,F){this.arcAbs(b,h,n,y,z,this._lastX+D,this._lastY+F)};f.prototype.linetoAbs=function(b,h){this.bridge!=null&&this._hasMethod("lineTo")&&this.bridge.lineTo(b,h);this._lastX=b;this._lastY=h;this._lastCommand="L";this._arrX.push(b);this._arrY.push(h)};f.prototype.linetoRel=function(b,h){this.linetoAbs(this._lastX+b,this._lastY+h)};f.prototype.movetoAbs=function(b,h){this.bridge!=null&&
this._hasMethod("moveTo")&&this.bridge.moveTo(b,h);this._firstX=b;this._firstY=h;this._lastX=b;this._lastY=h;this._lastCommand="M";this._arrX.push(b);this._arrY.push(h)};f.prototype.movetoRel=function(b,h){this.movetoAbs(this._lastX+b,this._lastY+h)};f.prototype.closePath=function(){this._invoke("close");this._lastX=this._firstX;this._lastY=this._firstY;this._lastCommand="Z"};t.prototype={beginRender:function(){},endRender:function(){},moveTo:function(){},lineTo:function(){},close:function(){},clear:function(){},
setFillColor:function(b){this.fillColor=b},setStrokeColor:function(b){this.strokeColor=b},setStrokeWidth:function(b){this.strokeWidth=b},setStrokeDashStyle:function(b){this.strokeDashStyle=b},ready:function(b){b&&b()}};i.prototype=new t;i.prototype.type="svg";i.svgns="http://www.w3.org/2000/svg";i.prototype._addCommand=function(b,h){for(var n=[],y=b==this._lastCommand,z=this._lastCommand=="M"&&b=="L",D=0;D<h.length;D++)n[D]=h[D];y||z?this.pathData.push(n.join(",")):this.pathData.push(b+n.join(","));
this._lastCommand=b};i.prototype.beginRender=function(b){this.pathData=[];this.container=b;this._lastCommand=null};i.prototype._getViewboxByBounds=function(b){var h=[0,0,0,0];if(b&&!b.isEmpty()){h[0]=Math.round(b.minX);h[1]=Math.round(b.minY);h[2]=Math.round(Math.abs(b.maxX-b.minX));h[3]=Math.round(Math.abs(b.maxY-b.minY))}return h};i.prototype.endRender=function(b){var h=this.pathData.join(" "),n=this.element,y=null;if(this.fillColor!=null||this.strokeColor!=null&&this.strokeWidth>0){if(!n){n=this.element=
document.createElementNS(i.svgns,"svg");n.style.cssText="position:absolute;";n.setAttribute("version","1.1");n.setAttribute("baseProfile","full");n.setAttribute("pointer-events","none");y=document.createElementNS(i.svgns,"path");y.setAttribute("stroke-linejoin","round");y.setAttribute("stroke-linecap","round");y.setAttribute("pointer-events","auto");n._path=y}if(b){y=this._getViewboxByBounds(b);b=n.style;b.position="absolute";b.left=y[0]+"px";b.top=y[1]+"px";b.width=y[2]+"px";b.height=y[3]+"px";n.setAttribute("viewBox",
y.join(" "))}y=n._path;y.setAttributeNS(null,"d",h||"M 0,0 0,0");if(this.fillColor!=null){if(this.fillColor instanceof m){h=this.fillColor.toHex();y.setAttributeNS(null,"fill-opacity",this.fillColor.alpha)}else h=this.fillColor;y.setAttributeNS(null,"fill",h)}else y.setAttributeNS(null,"fill","none");if(this.strokeColor!=null&&this.strokeWidth>0){if(this.strokeColor instanceof m){h=this.strokeColor.toHex();y.setAttributeNS(null,"stroke-opacity",this.strokeColor.alpha)}else h=this.strokeColor;y.setAttributeNS(null,
"stroke",h);h=parseInt(this.strokeWidth,10);y.setAttributeNS(null,"stroke-width",h);if(b=this.strokeDashStyle){if(b==="dash")b=h+","+h*2;y.setAttribute("stroke-dasharray",b)}}if(this.transform!=null){h=this.transform.getTransformText();y.setAttributeNS(null,"transform",h)}y.parentNode||n.appendChild(y);this.container&&this.container.appendChild(n);return n}};i.prototype.arcTo=function(){this._addCommand("A",arguments)};i.prototype.curveTo=function(){this._addCommand("C",arguments)};i.prototype.lineTo=
function(){this._addCommand("L",arguments)};i.prototype.moveTo=function(){this._addCommand("M",arguments)};i.prototype.quadraticCurveTo=function(){this._addCommand("Q",arguments)};i.prototype.close=function(){this._addCommand("z",arguments)};i.prototype.clear=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};i.isSupported=function(){var b=false;if(document.createElementNS)b=document.createElementNS(i.svgns,"svg").x!=null;return b};l.prototype=new t;
l.prototype.type="canvas";l.prototype.setStrokeDashStyle=function(b){this.strokeDashStyle=b;this.curveTo=this.quadraticCurveTo=false};l.prototype._addCommand=function(b,h){this._commands.push({command:b,args:h})};l.prototype.beginRender=function(b){this.clear();this._canvas.beginPath();this._commands=[];this._dashIndex=0;if(b)this.container=b};l.prototype.endRender=function(b){if(this.fillColor!=null||this.strokeColor!=null&&this.strokeWidth>0){var h=this.element;if(b){var n=Math.abs(b.maxY-b.minY),
y=b.minX,z=b.minY;h.width=Math.abs(b.maxX-b.minX);h.height=n;b=h.style;b.left=y+"px";b.top=z+"px"}if(this._commands){var D,F;b=[5,5];h=0;n=this._commands.length;for(var E;h<n;h++){E=this._commands[h];switch(E.command){case "curveTo":E.args[5]-=z;E.args[4]-=y;case "quadraticCurveTo":E.args[3]-=z;E.args[2]-=y;case "lineTo":case "moveTo":E.args[1]-=z;E.args[0]-=y}if(this.strokeDashStyle==="dash"){var G=E.args[0],J=E.args[1];if(E.command==="lineTo"){E.command="dashedLine";E.args=[D,F,G,J,b]}D=G;F=J}this._canvas[E.command].apply(this._canvas,
E.args)}}if(this.fillColor!=null){this._canvas.fillStyle=this.fillColor instanceof m?this.fillColor.toRGBA():this.fillColor;this._canvas.fill()}if(this.strokeColor!=null&&this.strokeWidth>0){this._canvas.strokeStyle=this.strokeColor instanceof m?this.strokeColor.toRGBA():this.strokeColor;this._canvas.lineWidth=this.strokeWidth;this._canvas.lineCap="round";this._canvas.lineJoin="round";this._canvas.stroke()}this.container&&this.container.appendChild(this.element)}return this.element};l.prototype.lineTo=
function(b,h){this._addCommand("lineTo",[b,h])};l.prototype.moveTo=function(b,h){this._addCommand("moveTo",[b,h])};l.prototype.curveTo=function(b,h,n,y,z,D){this._addCommand("bezierCurveTo",[b,h,n,y,z,D])};l.prototype.quadraticCurveTo=function(b,h,n,y){this._addCommand("quadraticCurveTo",[b,h,n,y])};l.prototype.close=function(){this._addCommand("closePath")};l.prototype.clear=function(){if(this.element){this._canvas.clearRect(0,0,this.element.width,this.element.height);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}if(this._command)this._command=
[]};l.isSupported=function(){var b=document.createElement("canvas"),h=false;if(b.getContext!=null)h=b.getContext("2d")!=null;return h};var r=window.CanvasRenderingContext2D&&CanvasRenderingContext2D.prototype;if(r&&r.lineTo)r.dashedLine=function(b,h,n,y,z){z||(z=[5,5]);var D=z.length;n=n-b;y=y-h;var F=Math.abs(n)>Math.abs(y),E=F?y/n:n/y;this.moveTo(b,h);for(var G=Math.sqrt(n*n+y*y),J=0;G>=0.1;){var I=Math.min(G,z[J%D]),H=Math.sqrt(I*I/(1+E*E));if(F){if(n<0)H=-H;b+=H;h+=E*H}else{if(y<0)H=-H;b+=E*H;
h+=H}this[J%2==0?"lineTo":"moveTo"](b,h);G-=I;J++}};p.prototype=new t;p.prototype.type="vml";p.prototype.beginRender=function(b){this.pathData=[];if(b)this.container=b};p.prototype.endRender=function(){if(this.fillColor!=null||this.strokeColor!=null&&this.strokeWidth>0){var b=this.element,h=null,n=null;if(!b){this.container.insertAdjacentHTML("beforeEnd",'<v:shape style="width:1px;height:1px;position:absolute;display:inline-block;"><v:stroke endcap="round"></v:stroke><v:fill></v:fill></v:shape>');
b=this.element=this.container.lastChild;b.coordsize="1 1"}n=b.firstChild;h=b.lastChild;if(this.fillColor!=null){b.filled=true;if(this.fillColor instanceof m){h.color=this.fillColor.toHex();h.opacity=this.fillColor.alpha}else{h.color=this.fillColor;h.opacity=1}}else b.filled=false;if(this.strokeColor!=null&&this.strokeWidth>0){if(this.strokeColor instanceof m){n.color=this.strokeColor.toHex();n.opacity=this.strokeColor.alpha}else{n.color=this.strokeColor;n.opacity=1}h=parseInt(this.strokeWidth,10);
n.weight=h+"px";if(h=this.strokeDashStyle){if(h==="dash")h="1,1";n.dashstyle=h}}else n.setAttribute("on",false);b.path=this.pathData.join(" ")||"m0,0";if(this.container&&(!b.parentNode||b.parentNode!==this.container))this.container.appendChild(b);return b}};p.prototype.curveTo=function(b,h,n,y,z,D){b=Math.round(b);h=Math.round(h);n=Math.round(n);y=Math.round(y);z=Math.round(z);D=Math.round(D);this.pathData.push("c"+[b,h,n,y,z,D].join(","))};p.prototype.lineTo=function(b,h){b=Math.round(b);h=Math.round(h);
this.pathData.push("l"+b+","+h)};p.prototype.moveTo=function(b,h){b=Math.round(b);h=Math.round(h);this.pathData.push("m"+b+","+h)};p.prototype.arcToByRect=function(b,h,n,y,z,D,F,E,G){b=b===0?"at ":"wr ";h=Math.round(h);n=Math.round(n);y=Math.round(y);z=Math.round(z);D=Math.round(D);F=Math.round(F);E=Math.round(E);G=Math.round(G);this.pathData.push(b+[h,n,y,z,D,F,E,G].join(","))};p.prototype.close=function(){this.pathData.push("x")};p.prototype.clear=function(){this.element&&this.element.parentNode&&
this.element.parentNode.removeChild(this.element)};p.prototype.ready=function(b){if(p.initialized!==true)(p._queue||(p._queue=[])).push(function(h){return function(){h()}}(b));if(p.initialized!=="loading"){p.initialized="loading";(function(){try{document.namespaces.v||document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");p.initialized=true;delete p.prototype.ready;for(var h=p._queue,n=null;n=h.shift();)n();delete p._queue}catch(y){setTimeout(arguments.callee,100)}})()}};p.isSupported=
function(){var b=navigator.appVersion.match(/MSIE (\d\.\d)/);return b&&b[1]>=6};e.prototype.angleBetween=function(b){var h=Math.acos((this.x*b.x+this.y*b.y)/(Math.sqrt(this.x*this.x+this.y*this.y)*Math.sqrt(b.x*b.x+b.y*b.y)));if(this.x*b.y-b.x*this.y<0)h=-h;return 180*h/Math.PI};e.prototype.dot=function(b){return this.x*b.x+this.y*b.y};e.prototype.perpendicular=function(b){b=this.project(b);b.x=this.x-b.x;b.y=this.y-b.y;return b};e.prototype.project=function(b){var h=b.dot(this)/b.dot(b);return b.scale(h)};
e.prototype.scale=function(b){return new e(this.x*b,this.y*b)};e.prototype.isZeroVector=function(){return this.x==0&&this.y==0};e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};e.fromPoints=function(b,h){return new e(h.x-b.x,h.y-b.y)};d.Config={maxChildPoints:10,minBufferWidth:10};d.prototype={getBounds:function(){if(this.bounds)return this.bounds;else if(this.points){for(var b=[],h=[],n=this.pointsNum;n--;){b.push(this.points[n][0]);h.push(this.points[n][1])}n=Math.min.apply(Math,
b)-this.width;var y=Math.min.apply(Math,h)-this.width;b=Math.max.apply(Math,b)+this.width;h=Math.max.apply(Math,h)+this.width;return this.bounds=new c.Bounds([new w(n,y),new w(b,h)])}},getChildSegs:function(){if(this.childSegs)return this.childSegs;else if(this.pointsNum>d.Config.maxChildPoints){var b=parseInt(this.pointsNum/2);return this.childSegs=[new d(this.points.slice(0,b),this.width,this.index),new d(this.points.slice(b-1,this.pointsNum),this.width,this.index+b-1)]}},getPointOnLine:function(b){var h=
this.getBounds(),n=null;if(h&&h.containsPoint(b))if(h=this.getChildSegs())for(var y=0;y<2;y++){if(n=h[y].getPointOnLine(b))break}else{n=this.points;h=[b.x,b.y];var z,D,F,E,G,J,I,H,O;b=h[0];h=h[1];for(var M=1,L=n.length;M<L;M++){E=n[M-1];G=n[M];if(E&&G){J=E[0];I=E[1];H=G[0];O=G[1];if(E[0]!==G[0]){E=(O-I)/(H-J);G=O-E*H;E=Math.abs(E*b+G-h)/Math.sqrt(E*E+1)}else E=Math.abs(b-H);G=Math.pow(O-I,2)+Math.pow(H-J,2);H=Math.pow(O-h,2)+Math.pow(H-b,2);J=Math.pow(I-h,2)+Math.pow(J-b,2);I=Math.pow(E,2);O=H-I+
J-I;if(O>G)E=Math.sqrt(Math.min(H,J));if(z==null||z>E){F=Math.sqrt(J-I)/Math.sqrt(G);D=Math.sqrt(H-I)/Math.sqrt(G);z=E;y=M}z=Math.min(z,E)}}if(z<=this.width){if(F>1)F=1;if(D>1)F=0;D=n[y-1][1]-n[y][1];z=n[y-1][0]-(n[y-1][0]-n[y][0])*F;F=n[y-1][1]-D*F;n=[z,F,y-1]}else n=void 0;if(n)n[2]+=this.index}return n}};c.Canvas=q;c.CanvasShape=C;c.CanvasPolyline=B;c.CanvasCircle=x;c.CanvasPolygon=u})(__MapNS__);(function(c){var s=c.Event;c.Copyright=function(q,f,t){this.text=q;this.bounds=f;this.minZoom=t};c.CopyrightCollection=__MapNSImpl__.Class({initialize:function(q){this.cpcol=[];this.prefix=q},addCopyright:function(q){this.cpcol.push(q);s.trigger(this,"newcopyright",[q])},getCopyrights:function(q,f){for(var t=[],i,l=0;l<this.cpcol.length;l++){i=this.cpcol[l];f>=i.minZoom&&i.bounds.intersects(q)&&t.push(this.cpcol[l].text)}return t},getCopyrightNotice:function(q,f){var t=this.getCopyrights(q,f);if(t.length===
0)return null;return(typeof this.prefix==="string"?this.prefix+" ":"")+t.join(", ")}})})(__MapNS__);(function(c){var s=__MapNSImpl__.Util;__MapNSImpl__.Interfaces.registInterface("LatLng",["getLng","getLat","equals","toUrlValue"]);c.LatLng=__MapNSImpl__.Class({initialize:function(q,f,t){q-=0;f-=0;if(!t){q=s.getNumberInRange(q,-90,90);f=s.getLoopNumber(f,-180,180)}this.lng=f;this.lat=q},getLng:function(){return this.lng},getLat:function(){return this.lat},equals:function(q){if(!q)return false;return s.isEquals(this.getLat(),q.getLat())&&s.isEquals(this.getLng(),q.getLng())},getDistanceTo:function(q){var f=
function(l){return Math.PI/180*l},t=f(q.getLat()-this.getLat()),i=f(q.getLng()-this.getLng());q=Math.sin(t/2)*Math.sin(t/2)+Math.cos(f(this.getLat()))*Math.cos(f(q.getLat()))*Math.sin(i/2)*Math.sin(i/2);return 6378137*2*Math.asin(Math.min(1,Math.sqrt(q)))},toUrlValue:function(q){q=q||6;return this.getLat().toFixed(q)+","+this.getLng().toFixed(q)},toString:function(){return this.getLat()+", "+this.getLng()}})})(__MapNS__);(function(c){var s=c.LatLng;c.LatLngBounds=__MapNSImpl__.Class({initialize:function(q,f){this.ne=this.sw=null;q&&this.extend(q);f&&this.extend(f)},getCenter:function(){var q=null;if(!this.isEmpty()){var f=this.getNorthEast(),t=this.getSouthWest();q=(f.getLat()+t.getLat())/2;f=(f.getLng()+t.getLng())/2;q=new s(q,f)}return q},getNorthEast:function(){return this.ne},getSouthWest:function(){return this.sw},intersects:function(q){if(this.isEmpty()||q.isEmpty())return null;var f=q.getSouthWest(),t=q.getNorthEast(),
i=this.getSouthWest(),l=this.getNorthEast();if(i.getLat()>t.getLat()||l.getLat()<f.getLat()||i.getLng()>t.getLng()||l.getLng()<f.getLng())return null;q=Math.max(i.getLng(),f.getLng());var p=Math.min(l.getLng(),t.getLng());f=Math.max(i.getLat(),f.getLat());t=Math.min(l.getLat(),t.getLat());return new c.LatLngBounds(new s(f,q),new s(t,p))},union:function(q){if(!q.isEmpty()){this.extend(q.getNorthEast());this.extend(q.getSouthWest())}},equals:function(q){return this.getSouthWest().equals(q.getSouthWest())&&
this.getNorthEast().equals(q.getNorthEast())},contains:function(q){if(this.isEmpty())return false;var f=q.getLng();q=q.getLat();var t=this.getSouthWest(),i=this.getNorthEast();return f>=t.getLng()&&f<=i.getLng()&&q>=t.getLat()&&q<=i.getLat()},isEmpty:function(){return!this.getNorthEast()&&!this.getSouthWest()},extend:function(q){if(this.isEmpty())this.ne=this.sw=q;else{var f=this.sw,t=f.getLat();f=f.getLng();var i=this.ne,l=i.getLat();i=i.getLng();var p=q.getLat();q=q.getLng();p<t&&(t=p);q<f&&(f=
q);p>l&&(l=p);q>i&&(i=q);this.sw=new s(t,f);this.ne=new s(l,i)}},toString:function(){return this.getSouthWest()+", "+this.getNorthEast()}})})(__MapNS__);(function(c){c.LatLngCircles=__MapNSImpl__.Class({initialize:function(s,q){this.private_={center:null,radius:null};this.private_.center=s;this.private_.radius=q},getCenter:function(){return this.private_.center},getRadius:function(){return this.private_.radius}})})(__MapNS__);(function(c){var s=__MapNSImpl__.Synchronize,q=__MapNSImpl__.Config,f=c.Size;c.MapType=__MapNSImpl__.Class({initialize:function(t){var i={name:"",tileLayers:null,projection:new c.Projection,alt:"",maxZoom:q.zoomMax,minZoom:q.zoomMin,radius:6378137,tileSize:new f(256,256)};t=s.fill(t,i);this.tileLayers=t.tileLayers;this.projection=t.projection;this.name=t.name;this.alt=t.alt;this.minZoom=t.minZoom;this.maxZoom=t.maxZoom;this.tileSize=t.tileSize;this.radius=t.radius},getCopyrights:function(t,i){var l=
this.tileLayers,p="",e,d;for(d=l.length;d--;)if((e=l[d].getCopyright(t,i))&&p.indexOf(e)===-1)p+=p===""?e:" "+e;return p}});c.MapTypeId={ROADMAP:"ROADMAP",HYBRID:"HYBRID",SATELLITE:"SATELLITE"}})(__MapNS__);(function(c){var s=c.LatLng,q=c.Point;c.Projection=__MapNSImpl__.Class({initialize:function(){},fromLatLngToPoint:function(f){return new q(Util.lngFrom4326ToProjection(f.getLng()),Util.latFrom4326ToProjection(f.getLat()))},fromPointToLatLng:function(f,t){return new s(Util.latFromProjectionTo4326(f.getY()),Util.lngFromProjectionTo4326(f.getX()),t)}})})(__MapNS__);(function(c){function s(p,e,d){var k=p.get("projection"),j=p.get("width")/2,o=p.get("height")/2,a=d||p.get("center");d=p.get("zoom");j=e.getX()-j;e=e.getY()-o;o=k.fromLatLngToPoint(a);p=p.getResolution(d);d=j*p.x+o.getX();p=-e*p.y+o.getY();return k.fromPointToLatLng(new t(d,p))}function q(p,e,d){var k=p.get("projection"),j=p.get("width")/2,o=p.get("height")/2,a=d||p.get("center");d=p.get("zoom");e=k.fromLatLngToPoint(e);k=k.fromLatLngToPoint(a);d=p.getResolution(d);p=(e.getX()-k.getX())/d.x;e=-(e.getY()-
k.getY())/d.y;return new t(j+p,o+e)}var f=c.MVCObject.checkers,t=c.Point,i=c.LatLng,l=__MapNSImpl__.Config;c.MapCanvasProjection=__MapNSImpl__.Class(c.MVCObject,{initialize:function(){c.MVCObject.apply(this)},fromContainerPixelToLatLng:function(p){return s(this,p)},fromLatLngToContainerPixel:function(p){return q(this,p)},fromDivPixelToLatLng:function(p){var e=this.get("origin");return s(this,p,e)},fromLatLngToDivPixel:function(p){var e=this.get("origin");return q(this,p,e)},getWorldWidth:function(){var p=
this.get("projection"),e=this.get("zoom");if(p&&f.isNumber(e)){var d=p.fromLatLngToPoint(new i(0,179.999999));p=p.fromLatLngToPoint(new i(0,-179.999999));e=this.getResolution(e);d=new t((d.getX()-p.getX())/e.x,(d.getY()-p.getY())/e.y);return Math.round(Math.sqrt(d.getX()*d.getX()+d.getY()*d.getY()))}},getResolution:function(p){var e=this.get("mapType"),d=e.tileSize;e=e.radius*Math.PI*2;p=this.getWorldTileDimension(p);return{x:e/d.getWidth()/p,y:e/d.getHeight()/p}},getWorldTileDimension:function(p){var e=
{},d;for(d=l.zoomMax+1;d--;)e[d]=1<<d;return p?e[p]:e}})})(__MapNS__);(function(c){var s=__MapNSImpl__.Synchronize;c.Overlay=__MapNSImpl__.Class(c.MVCView,{initialize:function(q){c.MVCObject.apply(this);q=s.fill(q,{noClip:true,smoothFactor:1});this.setOptions(q)},getPanes:function(){return this.get("mapPane_")?{mapPane:this.get("mapPane_"),overlayLayer:this.get("overlayLayer_"),overlayShadow:this.get("overlayShadow_"),overlayImage:this.get("overlayImage_"),floatShadow:this.get("floatShadow_"),overlayMouseTarget:this.get("overlayMouseTarget_"),floatPane:this.get("floatPane_"),
canvas:this.get("canvas_")}:null},draw:function(){},setMap:function(q){this.set("map",q)},getMap:function(){return this.get("map")},getProjection:function(){return this.get("mapCanvasProjection_")},construct:function(){},destroy:function(){},map_changed:function(){var q=this.get("map"),f=["viewbox_","originPosition_","mapPane_","overlayLayer_","overlayShadow_","canvas_","overlayImage_","floatShadow_","overlayMouseTarget_","floatPane_","overlayRedraw_","layerRedraw_","mapCanvasProjection_"];if(q)this.bindsTo(f,
q);else{this.destroy();this.set("constructed_",false);this.unbinds(f)}},overlayRedraw__changed:function(){if(this.get("originPosition_")){if(!this.get("constructed_")){this.construct();this.set("constructed_",true)}this.draw()}},layerRedraw__changed:function(){this.set("originalPoints_",null)}})})(__MapNS__);(function(c){var s=c.MVCObject.checkers,q=__MapNSImpl__.Interfaces,f=__MapNSImpl__.Util,t=__MapNSImpl__.Synchronize;c.Control=__MapNSImpl__.Class(c.MVCObject,{initialize:function(i){c.MVCObject.apply(this);var l={content:"",margin:new c.Size(0,0),align:0,visible:true,zIndex:0};i=t.fill(i,l);l=i.map;i.map=null;this.setOptions(i);l&&this.set("map",l)},controlContainer__changed:function(){var i=this.get("controlContainer_");if(i){var l=document.createElement("div");l.style.cssText="position:absolute;z-index:"+
this.get("zIndex")+";";i.appendChild(l);this.set("container_",l)}},changed:function(i){if(i==="align"||i==="margin"||i==="style"||i==="viewWidth_"||i==="viewHeight_"||i==="content")this.redraw();if(i==="visible"&&this.get("container_"))if(this.get(i))this.get("container_").style.display="";else this.get("container_").style.display="none"},redraw:function(){var i=this.get("container_");f.setPositionByAlign(i,this.get("align"),this.get("margin"));this.draw&&this.draw()},content_changed:function(){this.notify("container_")},
container__changed:function(){var i=this.get("content"),l=this.get("container_");if(i&&l){if(typeof i==="string")l.innerHTML=i;else if(i.parentNode!=l){l.innerHTML="";l.appendChild(i)}this.construct&&this.construct();this.redraw()}l&&this.notify("visible")},map_changed:function(){var i=this.get("map");if(i){this.bindTo("controlContainer_",i,"mapContainer_");this.bindTo("viewWidth_",i);this.bindTo("viewHeight_",i)}else{i=this.get("controlContainer_");var l=this.get("container_");i&&l&&i.removeChild(l);
this.destroy&&this.destroy();this.unbind("controlContainer_");this.unbind("viewWidth_");this.unbind("viewHeight_")}}});s={content:null,margin:s.checkInterface(q.Size),align:s.isNumber,zIndex:s.isNumber,visible:s.isBoolean,map:null};c.MVCObject.publicProperties(c.Control,s)})(__MapNS__);(function(c){var s=__MapNSImpl__.Util,q=__MapNSImpl__.Config,f=c.LatLng,t=c.LatLngBounds;c.BaseService=__MapNSImpl__.Class({initialize:function(){this.queryType=""},send:function(i,l){var p=q.SERVICE_URL;if(this.queryType==="geoc"||this.queryType==="rgeoc")p=p+this.queryType+"/?"+i.join("&")+"&output=jsonp&fr=mapapi";else{i.push("qt="+this.queryType);p=p+"?"+i.join("&")+"&output=jsonp&fr=mapapi"}var e=c.ObjectLoader.get();c.Event.bind(e,"loaded",this,function(){return function(d){this.onResult({object:d,
request:l.request,callback:l.callback})}}.call(this));e.request(p)},fromProjectionToLatLng:function(i,l){var p=s.latFromProjectionTo4326(l),e=s.lngFromProjectionTo4326(i);return new f(p,e)},fromSegmentToPath:function(i){i=i.split(";");for(var l=[],p=new t,e=0,d=i.length;e<d;e++){var k=i[e].split(",");k=new f(k[1],k[0]);l.push(k);p.extend(k)}return{path:l,bounds:p}},fromDestToPoi:function(i){var l=new c.Poi;l.id=i.uid;l.name=i.query||i.name;l.latLng=new f(i.pointy,i.pointx);l.type=i.poitype;l.address=
i.addr||"";return l},fromDestToString:function(i){var l=[];if(!checkers.isNull(i)){checkers.isInstanceOf(f)(i)&&(l.push(1),l.push(""),l.push(i.getLng()+","+i.getLat()),l.push(""));checkers.isString(i)&&(l.push(2),l.push(""),l.push(""),l.push(encodeURIComponent(i)));checkers.isInstanceOf(c.Poi)(i)&&(l.push(1),l.push(""),l.push(i.latLng.getLng()+","+i.latLng.getLat()),l.push(encodeURIComponent(i.name)))}return l.join("$$")},fromDistToString:function(i){var l="";if(i>0&&i<=10)l=i+__MapNSImpl__.RC.Units.m;
else if(i>10)l=i<1E3?(i/10).toFixed(1)*10+__MapNSImpl__.RC.Units.m:(i/1E3).toFixed(1)+__MapNSImpl__.RC.Units.km;return l},fromTimeToString:function(i){var l="";if(i>0&&i<60)l=i+__MapNSImpl__.RC.Units.min;else if(i>60)l=Math.floor(i/60)+__MapNSImpl__.RC.Units.hour+this.fromTimeToString(i-Math.floor(i/60)*60);return l}});c.Poi=function(){};c.Distance=function(){this.text="";this.value=0};c.Duration=function(){this.text="";this.value=0};c.Turning=function(){this.text="";this.latLng=null};c.Region=function(){};
c.PoiType={NORMAL:0,BUS_STATION:1,SUBWAY_STATION:2,BUS_LINE:3,DISTRICT:4,DOCK:"DOCK"}})(__MapNS__);(function(c){function s(){this.HEADER=document.getElementsByTagName("head")[0]}var q=__MapNSImpl__.Util,f=c.Event,t=__MapNSImpl__.Synchronize,i=0;s.prototype.request=function(l,p){p=t.fill(p,{jsonp:true,objName:"OLR",charset:"gbk"});this.objName=p.objName;this.charset=p.charset;if(p.jsonp){this.callback="cb"+((new Date).getTime()+i++).toString(36);l+="&cb="+this.callback;this.objName=p.objName+this.callback;var e=this;window[this.callback]=function(d){window[e.objName]=d}}l+="&t="+(new Date).getTime();
if(!this.jsFile){this.jsFile=document.createElement("script");this.jsFile.setAttribute("type","text/javascript");this.jsFile.setAttribute("charset",this.charset);this.jsFile.src=l;this.HEADER.appendChild(this.jsFile);if(q.Browser().ie&&q.Browser().ie<9){f.bindDom(this.jsFile,"readystatechange",this,q.callback(this,this.onReadyStateChange,[this.callback]));this.fixIeOnError(l)}else{f.bindDom(this.jsFile,"load",this,q.callback(this,this.onLoad,[this.callback]));f.bindDom(this.jsFile,"error",this,this.onError)}window.opera&&
this.fixOperaOnError(l)}this.running=true};s.prototype.onLoad=function(l){var p;if(window[this.objName])p=window[this.objName];p?f.trigger(this,"loaded",[p]):f.trigger(this,"error",[]);try{window[l]&&delete window[l];window[this.objName]&&delete window[this.objName]}catch(e){}this.remove()};s.prototype.onError=function(){f.trigger(this,"error",[]);this.remove()};s.prototype.onReadyStateChange=function(l){this.jsFile&&/loaded|complete/.test(this.jsFile.readyState)&&this.onLoad(l)};s.get=function(){var l,
p;if(!s.objects)s.objects=[];p=s.objects;for(var e=0,d=p.length;e<d;e++)if(p[e].running===false){l=p[e];f.clearListeners(l);p.splice(e,d-e);break}if(!l){l=new s;s.objects.push(l);return l}l.running=true;return l};s.prototype.remove=function(){if(this.jsFile){this.jsFile.removeAttribute("src");this.jsFile.parentNode.removeChild(this.jsFile);this.running=false;delete this.jsFile}};s.prototype.fixOperaOnError=function(l){l='<script src="'+l+'" '+(document.dispatchEvent?"onload":"onreadystatechange")+
'="this.ownerDocument.z = 1"><\/script>';var p=document.createElement("iframe");p.style.display="none";this.HEADER.appendChild(p);var e=p.contentDocument,d=this;p.onload=function(){e.z!=1&&d.onError();p.onload=null;this.HEADER.removeChild(this)};try{e.write(l);e.close()}catch(k){}};s.prototype.fixIeOnError=function(){var l=this;setTimeout(function(){l.onError()},3E3)};c.ObjectLoader=s})(__MapNS__);(function(c){var s=__MapNSImpl__.Config,q=c.MVCObject,f=c.MVCView,t=c.Size,i=c.LatLngBounds,l=c.LatLng,p=q.checkers,e=__MapNSImpl__.Synchronize;p.isTileGridLayer=function(d){if(typeof d.getTileImageUrl==="function"||typeof d.getTileUrl==="function")return true;return false};c.TileLayer=__MapNSImpl__.Class(q,{initialize:function(d){q.apply(this);var k={tileUrlTemplate:"",tileSubdomains:"",copyrights:null,isPng:false,tileSize:new t(256,256),opacity:1,minZoom:s.zoomMin,maxZoom:s.zoomMax,zIndex:0,errorUrl:s.domain+
"imgs/404.png"};d=e.fill(d,k);this.setOptions(d);d.map&&this.setMap(d.map);f.loadView("TileLayer",this)},setMap:function(d){this.set("map",d)},getMap:function(){return this.get("map")},getCopyright:function(d,k){return this.get("copyrights_").getCopyrightNotice(d,k)},changed:function(d){if(d=="map"){var k=this.get("map");if(k){d=k.layers;this.set("map_",k);d.exists(this)||d.push(this);var j=d.getLength();j==1&&this.get("zIndex")=="-1"&&this.set("isBase",true);if(this.get("isBase")){for(var o=0;o<
j;o++){var a=d.getAt(o);a!=this&&a.set("isBase",false)}k.set("baseLayer",this)}}else if(k=this.get("map_")){d=k.layers;d.exists(this)&&this.get("map_").layers.pop(this);if(d.getLength()==1){d=d.getAt(0);d.get("zIndex")=="-1"&&d.set("isBase",true);d.set("map",k)}}}},getTileUrl:function(d,k){var j=d.getX(),o=d.getY(),a=s.domain+"imgs/transparent.gif",g=this.get("tileUrlTemplate"),m=this.get("tileSubdomains");if(g){a=g.replace(/\{x\}/,j);a=a.replace(/\{y\}/,o);a=a.replace(/\{z\}/,k)}if(m){g=m.split(",");
if(g.length)a=a.replace(/\{s\}/,g[Math.abs(j+o)%g.length])}return a}});q.publicProperties(c.TileLayer,{zIndex:p.isNumber,opacity:p.isNumber,minZoom:p.isNumber,maxZoom:p.isNumber});c.RoadMapLayer=__MapNSImpl__.Class(c.TileLayer,{initialize:function(d){var k=new i(new l(-90,-180),new l(90,180)),j=new c.CopyrightCollection("&nbsp;&nbsp;Data&copy; ");j.addCopyright(new c.Copyright("Mapabc",k,1));d=e.fill(d,{tileUrlTemplate:"http://{s}.map.soso.com/maptilesv2/{z}/{dx}/{dy}/{x}_{y}.png",tileSubdomains:"p0,p1,p2,p3",
copyrights:j,isBase:true});c.TileLayer.apply(this,[d])},getTileImageUrl:function(d,k,j){var o=s.tileDomains,a=s.domain+"imgs/transparent.gif",g=this.get("tileUrlTemplate");o=this.get("tileSubdomains").split(",");var m=o.length,w=this.get("tileSize").getHeight();k=Math.pow(2,j+Math.floor(256/w/2))-1-k;w=k.toString();m=w.charAt(w.length-1)%m;if(g){a=g.replace(/\{x\}/,d);a=a.replace(/\{y\}/,k);a=a.replace(/\{z\}/,j);a=a.replace(/\{dx\}/,Math.floor(d/16));a=a.replace(/\{dy\}/,Math.floor(k/16))}if(o.length)a=
a.replace(/\{s\}/,o[m]);return a}});c.SatelliteLayer=__MapNSImpl__.Class(c.RoadMapLayer,{initialize:function(d){var k=new i(new l(-90,-180),new l(90,180)),j=new c.CopyrightCollection("&nbsp;&nbsp;Imagery&copy; ");j.addCopyright(new c.Copyright("DigitalGlobe & Chinasiwei",k,1));d=e.fill(d,{tileUrlTemplate:"http://{s}.map.soso.com/sateTiles/{z}/{dx}/{dy}/{x}_{y}.jpg",tileSubdomains:"p0,p1,p2,p3",copyrights:j,isBase:true});c.TileLayer.apply(this,[d])}});c.HybridLayer=__MapNSImpl__.Class(c.RoadMapLayer,
{initialize:function(d){var k=new i(new l(-90,-180),new l(90,180)),j=new c.CopyrightCollection("&nbsp;&nbsp;Data&copy; ");j.addCopyright(new c.Copyright("Mapabc",k,1));d=e.fill(d,{tileUrlTemplate:"http://{s}.map.soso.com/sateTranTiles/{z}/{dx}/{dy}/{x}_{y}.png",tileSubdomains:"p0,p1,p2,p3",copyrights:j});c.TileLayer.apply(this,[d])}});c.TrafficLayer=__MapNSImpl__.Class(c.TileLayer,{initialize:function(d){d=e.fill(d,{isPng:true});c.TileLayer.apply(this,[d])},getTileUrl:function(d,k){var j=d.getX(),
o=d.getY();return"http://rtt.map.soso.com/live/"+k+"/"+Math.floor(j/10)+"/"+Math.floor(o/10)+"/"+j+"_"+o+".png?timeKey="+(new Date).getTime()}});c.TileGridLayer=c.TileLayer})(__MapNS__);(function(c){var s=__MapNSImpl__.Util,q=__MapNSImpl__.Config,f=__MapNSImpl__.RC.MapType,t=__MapNSImpl__.Interfaces,i=c.MVCObject.checkers,l=i.checkInterface(t.LatLng),p=c.Event,e=c.MapType,d=c.MapTypeId,k=c.Size,j=c.Point,o=c.LatLng,a=c.LatLngBounds,g=c.Bounds,m=c.MVCArray,w=c.MVCObject,v=c.MVCView,A=__MapNSImpl__.Synchronize,C=s.Browser().firefox?"-moz-grab":q.domain+"imgs/grab.cur",B=s.Browser().firefox?"-moz-grabbing":q.domain+"imgs/grabbing.cur",x=__MapNSImpl__.Class(w,{initialize:function(u,
r){w.apply(this);if(s.Browser().ie){p.addDomListener(window,"unload",p.unload);try{document.execCommand("BackgroundImageCache",false,true)}catch(b){}}this.set("container_",u);var h=!!(s.Browser().ie&&s.Browser().ie<8||s.Browser().isSupportTouch);h={__hideLogo__:false,center:new o(q.DEFAULT_LAT,q.DEFAULT_LNG),zoomLevel:q.DEFAULT_ZOOMLEVEL,maxZoom:q.zoomMax,minZoom:q.zoomMin,backgroundColor:"",cursor:C,draggingCursor:B,draggable:true,scrollWheel:true,zoomInByDblClick:true,keyBoard:true,animation:true,
mapTypeId:d.ROADMAP,boundary:null,autoPan:false,redrawOnMoveEnd:h,__clip_padding__:1.5};r=A.fill(r,h);this.setOptions(r);h=Math.max(r.zoomLevel,r.minZoom);h=Math.min(h,r.maxZoom);this.set("zoomLevel",h);h=new c.MapCanvasProjection;h.bindTo("center",this,"center");h.bindTo("width",this,"viewWidth_");h.bindTo("height",this,"viewHeight_");h.bindTo("zoom",this,"zoomLevel");h.bindTo("origin",this,"origin_");h.bindTo("mapType",this);h.bindTo("map",this);this.layers=new m;this.controls=new m;this.overlays=
new m;var n=this;p.addListener(n.layers,"remove_at",function(F,E){E&&E.get("map")&&E.set("map",null)});p.addListener(this.layers,"insert_at",function(F,E){E.get("map")||E.set("map",n)});this.fromPixelToLngLat=this.fromPixelToLatLng;this.fromLngLatToPixel=this.fromLatLngToPixel;this.fromContainerPixelToLngLat=this.fromContainerPixelToLatLng;this.fromLngLatToContainerPixel=this.fromLatLngToContainerPixel;this.notifyResize();v.loadView("Map",this);var y=new c.RoadMapLayer,z=new c.SatelliteLayer,D=new c.HybridLayer;
this.ROADMAP=new e({name:"roadmap",alt:f.ROADMAP,tileLayers:[y]});this.SATELLITE=new e({name:"satellite",alt:f.SATELLITE,tileLayers:[z]});this.HYBRID=new e({name:"hybrid",alt:f.HYBRID,tileLayers:[D]});y=this[this.get("mapTypeId")];this.set("projection",y.projection);this.set("mapType",y);h.bindTo("projection",this);this.set("mapCanvasProjection_",h);h=0;for(z=y.tileLayers.length;h<z;h++)y.tileLayers[h].set("map",this);setInterval(s.callback(this,this.notifyResize),10)},mapTypeId_changed:function(){var u=
this.get("mapType"),r=this[this.get("mapTypeId")];if(u)for(var b=0,h=u.tileLayers.length;b<h;b++){var n=u.tileLayers[b];n.set("map",null)}if(r){this.set("projection",r.projection);this.set("mapType",r);b=0;for(h=r.tileLayers.length;b<h;b++){n=r.tileLayers[b];n.set("map",this)}}},getViewSize:function(){return new k(this.get("viewWidth_"),this.get("viewHeight_"))},getBounds:function(){if(this.get("projection")){var u=this.get("viewWidth_"),r=this.get("viewHeight_");r=this.fromContainerPixelToLatLng(new j(0,
r));u=this.fromContainerPixelToLatLng(new j(u,0));return new a(r,u)}},moveTo:function(u,r){if(l(u)){var b=this.get("boundary");if(b){var h=this.get("projection"),n=this.get("mapCanvasProjection_"),y=this.get("zoomLevel"),z=this.get("viewWidth_"),D=this.get("viewHeight_"),F=h.fromLatLngToPoint(b.getNorthEast());b=h.fromLatLngToPoint(b.getSouthWest());var E=h.fromLatLngToPoint(u),G=n.getResolution(y).x;y=n.getResolution(y).y;n=E.getX();E=E.getY();var J=F.getX()-z/2*G;F=F.getY()-D/2*y;z=b.getX()+z/2*
G;D=b.getY()+D/2*y;if(n>J&&E>F&&n<z&&E<D)return;u=h.fromPointToLatLng(new j(Math.max(Math.min(n,J),z),Math.max(Math.min(E,F),D)))}h=this.get("center");D=true;if(!h||!this.get("animation")||r||!v.getView("Map"))D=false;else{D=this.fromLatLngToContainerPixel(h);z=this.fromLatLngToContainerPixel(u);h=D.getX()-z.getX();D=D.getY()-z.getY();D=!(Math.abs(h)>this.get("viewWidth_")||Math.abs(D)>this.get("viewHeight_"))}if(D)this.set("animation_",{type:"move",center:u});else{this.set("animation_",null);this.set("center",
u)}}else throw Error("Map center should be a LatLng.");},moveBy:function(u,r){if(i.checkInterface(t.Size)(u)){if(u.getWidth()!==0||u.getHeight()!==0){var b=this.get("center");b=this.fromLatLngToContainerPixel(b);var h=b.getX()-u.getWidth();b=b.getY()-u.getHeight();this.moveTo(this.fromContainerPixelToLatLng(new j(h,b)),r)}}else throw Error("Move by new a Size type offset.");},fitBounds:function(u,r,b){r=r||{left:0,right:0,top:0,bottom:0};var h=parseInt(r.left)||0+parseInt(r.right)||0;r=parseInt(r.top)||
0+parseInt(r.bottom)||0;h=this.get("viewWidth_")-h;r=this.get("viewHeight_")-r;var n=this.get("mapCanvasProjection_");h=s.getOptimalZoomLevel(u,h,r,n);this.set("center",u.getCenter());this.set("zoomLevel",b||h)},getFitBoundsZoomLevel:function(u,r){var b=this.get("viewWidth_"),h=this.get("viewHeight_"),n=this.get("mapCanvasProjection_");if(r){b=r.getWidth();h=r.getHeight()}return s.getOptimalZoomLevel(u,b,h,n)},zoomIn:function(u,r,b){this.zoomTo(this.getZoomLevel()+1,u,r,b)},zoomOut:function(u,r,b){this.zoomTo(this.getZoomLevel()-
1,u,r,b)},zoomTo:function(u,r,b,h){u=Math.round(u);u=Math.max(u,this.get("minZoom"));u=Math.min(u,this.get("maxZoom"));if(u!==this.get("zoomLevel")){var n=u-this.getZoomLevel();h=this.get("animation")&&!h;var y=this.fromLatLngToContainerPixel(r||this.get("center")),z=this.getBaseLayer(),D=this.get("zoomAnimation_");if((!D||D.getStatus()!==1)&&h)z.notify("exchange_");z=y.getX();D=y.getY();if(z<0||z>this.get("viewWidth_")||D<0||D>this.get("viewHeight_"))h=false;z=this.get("originPosition_");this.set("zoomLevel",
u);if(r){if(b){r=this.fromLatLngToContainerPixel(r);D=this.getCenter();D=this.fromLatLngToContainerPixel(D);u=D.getX()+r.getX()-y.getX();r=D.getY()+r.getY()-y.getY();r=this.fromContainerPixelToLatLng(new j(u,r))}this.set("center",r)}h&&z||v.getView("Map")?this.set("animation_",{type:"zoom",delta:n,focusPixel:y,originPosition:z,isInPlace:b}):this.set("animation_",null)}},notifyResize:function(){var u=this.get("container_"),r=u.offsetWidth,b=u.offsetHeight;u=this.getViewSize();if(!(u.getWidth()==r&&
u.getHeight()==b)){var h=this.get("center")&&this.get("projection")&&this.get("mapCanvasProjection_");u=null;if(h){var n=this.fromContainerPixelToLatLng(new j(r/2,b/2));u=[r-this.get("viewWidth_"),b-this.get("viewHeight_")]}this.set("viewWidth_",r);this.set("viewHeight_",b);if(h){if(r=this.get("origin_")){r=this.fromLatLngToContainerPixel(r);this.get("originPosition_");r=new j(r.getX()+u[0]/2,r.getY()+u[1]/2);this.set("origin_",this.fromContainerPixelToLatLng(r))}this.set("center",n)}}},getDistance:function(u,
r){if(!l(u)||!l(r))throw Error("Start and end must be __MapNS__.LatLng object.");var b=function(y){return Math.PI/180*y},h=b(u.getLat()-r.getLat()),n=b(u.getLng()-r.getLng());b=Math.sin(h/2)*Math.sin(h/2)+Math.cos(b(r.getLat()))*Math.cos(b(u.getLat()))*Math.sin(n/2)*Math.sin(n/2);return 6378137*2*Math.asin(Math.min(1,Math.sqrt(b)))},fromLatLngToPixel:function(u){return this.get("mapCanvasProjection_").fromLatLngToDivPixel(u)},fromPixelToLatLng:function(u){return this.get("mapCanvasProjection_").fromDivPixelToLatLng(u)},
fromLatLngToContainerPixel:function(u){return this.get("mapCanvasProjection_").fromLatLngToContainerPixel(u)},fromContainerPixelToLatLng:function(u){return this.get("mapCanvasProjection_").fromContainerPixelToLatLng(u)},getCenter:function(){return this.get("center")},setCenter:function(u){this.moveTo(u,true)},getZoomLevel:function(){return this.get("zoomLevel")},setZoomLevel:function(u){this.zoomTo(u,null,null,true)},getBaseLayer:function(){return this.get("baseLayer")},getViewbox:function(){var u=
this.get("mapCanvasProjection_"),r=this.get("__clip_padding__");if(u){var b=this.get("viewWidth_")*r;r=this.get("viewHeight_")*r;var h=this.getCenter();u=u.fromLatLngToDivPixel(h);h=u.x+b;var n=u.y+r;return new g([new j(u.x-b,u.y-r),new j(h,n)])}},getDrawBounds:function(){var u=this.get("projection"),r=this.get("__clip_padding__");if(u){var b=this.get("viewWidth_")*r;r=this.get("viewHeight_")*r;var h=this.getCenter(),n=u.fromLatLngToPoint(h);h=n.getX();var y=n.getY();n=new j(h-b,y+r);b=new j(h+b,
y-r);r=u.fromPointToLatLng(n);u=u.fromPointToLatLng(b);return new a(r,u)}}});w.publicProperties(x,{backgroundColor:i.isString,cursor:i.isString,draggingCursor:i.isString,scrollWheel:i.isBoolean,zoomInByDblClick:i.isBoolean,keyBoard:i.isBoolean,animation:i.isBoolean,draggable:i.isBoolean,autoPan:i.isBoolean,mapTypeId:i.isString});c.Map=x})(__MapNS__);(function(c){var s=c.MVCObject.checkers,q=__MapNSImpl__.Config,f=__MapNSImpl__.Synchronize,t=c.MVCView,i=c.Overlay;c.InfoWindow=__MapNSImpl__.Class(i,{initialize:function(l){i.apply(this);l=f.fill(l,{visible:true,content:"",style:{url:q.domain+"imgs/infowindow_default.png",top_left:[0,0,10,10],bottom_right:[600,430,10,10],margin:[20,10],width_range:[200,600],height_range:[80,500],offset:[-3,0],stem:{x:[65,100,43],y:484,align:c.ALIGN.CENTER,offset:0},close:{url:q.domain+"imgs/infowindow_close_default.png",
coordinate:[0,0,13,13],align:c.ALIGN.TOP_RIGHT,margin:[8,8]},shadow:{url:q.domain+"imgs/infowindow_shadow_default.png",top_left:[343,142],bottom_right:[641,452],stem:{x:[97,127,44],y:484,offset:[-6,-2],blur:5}}},zIndex:0,position:null,target:null,autoMove:true});this.setOptions(l);t.loadView("InfoWindow",this)},open:function(l,p){this.set("position",p);this.set("content",l);this.set("visible",true)},close:function(){this.set("visible",false)},reset:function(){this.notify("content")},construct:function(){this.set("panes_",
this.getPanes())},destroy:function(){this.notify("destroy_");this.set("panes_",null)},draw:function(){this.notify("draw_")}});c.MVCObject.publicProperties(c.InfoWindow,{visible:s.isBoolean,content:null,zIndex:s.isNumber,autoMove:s.isBoolean,style:null,position:null,target:null,animation:null});c.InfoWindow.Animation={POP:0}})(__MapNS__);(function(){var c=__MapNS__.MVCObject.checkers,s=__MapNS__.Overlay,q=__MapNS__.MVCView,f=__MapNS__.MVCObject,t=__MapNSImpl__.Synchronize;__MapNS__.Polyline=__MapNSImpl__.Class(s,{initialize:function(i){s.apply(this);i=t.fill(i,{path:[],strokeColor:"#1791fc",strokeWeight:4,fillOpacity:0.2,strokeOpacity:0.8,strokeDashStyle:"solid",editable:false,hasLabel:false,zIndex:0,cursor:"",simplify:true,visible:true});this.setValues(i);q.loadView("Polygon",this)},construct:function(){this.set("panes_",this.getPanes());
this.notify("construct_")},draw:function(){this.notify("draw_")},destroy:function(){this.notify("destroy_");this.set("panes_",null)},getBounds:function(){var i=this.get("path"),l=null;if(i&&i.length!==0){var p=i[0].getLng(),e=i[0].getLat();l=p;for(var d=e,k=1,j=i.length;k<j;k++){var o=i[k].getLng(),a=i[k].getLat();o>l&&(l=o);a>d&&(d=a);o<p&&(p=o);a<e&&(e=a)}i=new __MapNS__.LatLng(e,p);l=new __MapNS__.LatLng(d,l);l=new __MapNS__.LatLngBounds(i,l)}return l}});c={path:null,strokeColor:f.union(c.isInstanceOf(__MapNS__.Color),
c.isString,c.isNull),strokeWeight:c.isNumber,strokeOpacity:c.isNumber,strokeDashStyle:c.isString,cursor:c.isString,editable:c.isBoolean,hasLabel:c.isBoolean,zIndex:c.isNumber,simplify:c.isBoolean,visible:c.isBoolean};f.publicProperties(__MapNS__.Polyline,c)})();(function(c){var s=c.MVCObject.checkers,q=c.Polyline,f=c.MVCObject,t=__MapNSImpl__.Synchronize;c.Polygon=__MapNSImpl__.Class(q,{initialize:function(l){l=t.fill(l,{strokeWeight:2,filled:true});q.apply(this,[l]);this.set("fillColor",l.fillColor||"#1791fc")}});var i=f.union(s.isInstanceOf(c.Color),s.isString,s.isNull);f.publicProperties(c.Polygon,{path:null,strokeColor:i,strokeWeight:s.isNumber,strokeOpacity:s.isNumber,strokeDashStyle:s.isString,cursor:s.isString,zIndex:s.isNumber,visible:s.isBoolean,
fillColor:i,fillOpacity:s.isNumber,simplify:s.isBoolean,editable:s.isBoolean})})(__MapNS__);(function(c){var s=c.MVCObject.checkers,q=c.MVCView,f=c.MVCObject,t=c.Overlay,i=c.LatLng,l=__MapNSImpl__.Synchronize;c.Circle=__MapNSImpl__.Class(t,{initialize:function(e){t.apply(this);var d={center:new c.LatLng(0,0),radius:0,strokeColor:new c.Color(23,145,252,0.8),strokeWeight:1,fillColor:new c.Color(23,145,252,0.2),strokeDashStyle:"solid",zIndex:0,cursor:"",visible:true};e=l.fill(e,d);this.setValues(e);q.loadView("Circle",this)},construct:function(){this.set("panes_",this.getPanes());this.notify("construct_")},
draw:function(){this.notify("draw_")},destroy:function(){this.notify("destroy_");this.set("panes_",null)},getBounds:function(){var e=this.get("center"),d=this.get("radius"),k=null,j=e.getLat();if(e)if(d<=0)k=new c.LatLngBounds(new c.LatLng(e.getLat(),e.getLng()),new c.LatLng(e.getLat(),e.getLng()));else{var o=d/6378137,a=o*180/Math.PI;d=j+a;k=j-a;a=Math.asin(o/2/Math.cos(j*Math.PI/180))*360/Math.PI;j=e.getLng()+a;e=e.getLng()-a;k=new c.LatLngBounds(new c.LatLng(k,e),new c.LatLng(d,j))}return k}});
var p=f.union(s.isInstanceOf(c.Color),s.isString,s.isNull);s={center:f.union(s.isInstanceOf(i),s.isNull),radius:s.isNumber,strokeColor:p,fillColor:p,strokeWeight:s.isNumber,strokeOpacity:s.isNumber,fillOpacity:s.isNumber,strokeDashStyle:s.isString,cursor:s.isString,zIndex:s.isNumber,visible:s.isBoolean};f.publicProperties(c.Circle,s)})(__MapNS__);(function(c){var s=__MapNSImpl__.Util,q=c.Point,f=c.Size,t=c.MVCObject,i=__MapNSImpl__.Interfaces,l=c.MVCObject.checkers;c.MarkerImage=__MapNSImpl__.Class(t,{initialize:function(d,k,j,o,a){t.apply(this);this.set("origin_",o||new q(0,0));this.set("size_",k||a);this.set("anchor_",j);this.set("scaledSize_",a);this.set("url_",d);new e(this)}});var p=t.union(l.checkInterface(i.Size),l.isNull);i=t.union(l.checkInterface(i.Point),l.isNull);c.MVCObject.publicProperties(c.MarkerImage,{url_:l.isString,size_:p,
origin_:i,anchor_:i,scaledSize_:p});var e=__MapNSImpl__.Class(t,{initialize:function(d){t.apply(this);this.bindsTo(["origin_","size_","anchor_","scaledSize_","ready_","url_"],d)},url__changed:function(){var d=this,k=this.get("url_");s.fetchImage(k,function(j,o){if(j!==0&&o!==0){d.get("scaledSize_")||d.set("scaledSize_",new f(j,o));d.get("size_")||d.set("size_",d.get("scaledSize_"));d.set("ready_",true)}})}});c.MarkerShape=__MapNSImpl__.Class(t,{initialize:function(d,k){t.apply(this);this.set("coord_",
d);this.set("type_",k)}})})(__MapNS__);(function(c){var s=c.MVCObject.checkers,q=__MapNSImpl__.Interfaces,f=__MapNSImpl__.Util,t=c.Size,i=c.ALIGN,l=c.MVCObject,p=__MapNSImpl__.Synchronize;c.MarkerDecoration=__MapNSImpl__.Class(l,{initialize:function(k){l.apply(this);var j={align:i.CENTER,zIndex:0,margin:new t(0,0)};k=p.fill(k,j);this.setOptions(k);new d(this)}});var e=l.union(s.isString,s.isNull,s.isNumber,s.isHtmlControl);l.publicProperties(c.MarkerDecoration,{content:e,margin:s.checkInterface(q.Size),marker:null});var d=__MapNSImpl__.Class(c.MVCObject,
{initialize:function(k){l.apply(this);this.set("model_",k);this.bindsTo(["content","align","margin","marker"],k)},iconDom__changed:function(){var k=this.get("container_"),j=this.get("iconDom_");if(k&&k.parentNode)try{k.parentNode.removeChild(k)}catch(o){}if(!k){k=document.createElement("div");k.style.cssText="position:absolute;";this.set("container_",k)}if(j){j.appendChild(k);this.notify("content");this.draw()}},marker_changed:function(){var k=this.get("marker");this.unbind("iconDom_");k?this.bindTo("iconDom_",
k):this.notify("iconDom_")},content_changed:function(){var k=this.get("container_"),j=this.get("content");if(k&&j){k.innerHTML="";if(f.isHtmlControl(j))k.appendChild(j);else k.innerHTML=j;this.draw()}},changed:function(k){if(k==="align"||k==="margin")this.draw()},draw:function(){this.get("container_")&&f.setPositionByAlign(this.get("container_"),this.get("align"),this.get("margin"),this.get("iconDom_"))}})})(__MapNS__);(function(c){function s(){return m=m||new j(t.domain+"imgs/marker.png",new l(22,34),new p(11,34),new p(0,0))}function q(){return w=w||new j(t.domain+"imgs/marker.png",new l(51,39),new p(18,34),new p(22,0))}function f(){return v=v||new c.MarkerShape([7,0,13,0,17,1,22,7,22,8,22,14,21,16,20,18,18,19,15,22,13,25,12,26,12,28,11,31,11,33,10,33,10,29,9,28,9,26,8,25,0,15,0,7],"poly")}var t=__MapNSImpl__.Config,i=c.Overlay,l=c.Size,p=c.Point,e=c.MVCObject,d=c.MVCView,k=c.Animation,j=c.MarkerImage,o=__MapNSImpl__.Interfaces,
a=c.MVCObject.checkers,g=__MapNSImpl__.Synchronize,m=null,w=null,v=null,A=null;c.Marker=__MapNSImpl__.Class(i,{initialize:function(u){i.apply(this);u=g.fill(u,{icon:null,shadow:null,shape:null,dragTargetIcon:null,title:"",cursor:"pointer",clickable:true,visible:true,zIndex:0,flat:false,dragAnimation:1,altitude_:0,draggable:false});!u.icon&&(u.icon=s(),u.shadow&&(u.shadow=q()),u.shape=f());if(u.draggable){var r=u,b;if(!(b=u.dragTargetIcon))b=A=A||new j(t.domain+"imgs/target.png",new l(16,16),new p(8,
8),new p(0,0));r.dragTargetIcon=b}this.setOptions(u);d.loadView("Marker",this)},construct:function(){this.set("panes_",this.getPanes())},destroy:function(){if(this.get("panes_")){this.set("dragEvent_",false);this.notify("destroy_");this.set("panes_",null)}},draw:function(){this.notify("draw_")},startDrag:function(u){this.set("dragEvent_",u)},stopDrag:function(){this.set("dragEvent_",false)},changed:function(u){var r=this.get(u);switch(u){case "animation":this.set("animationType_",r);break;case "shadow":case "icon":case "dragTargetIcon":if(u===
"icon")if(this.get("icon")===null){this.unbind(u+"Ready_");this.set("icon",s());this.set("shadow",q());break}else if(this.get("icon")!==s()){this.get("shadow")===q()&&this.set("shadow",null);this.get("shape")===f()&&this.set("shape",null)}this.unbind(u+"Ready_");r&&this.bindTo(u+"Ready_",r,"ready_")}}});c.Marker.Animation={BOUNCE:0,DROP:1,JUMP:2,STICK:3};var C=e.union(function(u){return u===k.BOUNCE||u===k.DROP||u===k.JUMP||u===k.STICK},a.isNull),B=e.union(a.isInstanceOf(j),a.isNull),x=e.union(a.isInstanceOf(c.MarkerShape),
a.isNull);o={position:e.union(a.checkInterface(o.LatLng),a.isNull),icon:B,title:a.isStringOrNull,shadow:B,dragTargetIcon:B,shape:x,cursor:a.isString,zIndex:a.isNumber,visible:a.isBoolean,clickable:a.isBoolean,flat:a.isBoolean,draggable:a.isBoolean,animation:C};e.publicProperties(c.Marker,o)})(__MapNS__);(function(c){var s=c.Point,q=__MapNSImpl__.Interfaces,f=c.MVCObject,t=c.MVCView,i=f.checkers,l=c.Overlay,p=__MapNSImpl__.Synchronize;c.Label=__MapNSImpl__.Class(l,{initialize:function(j){l.apply(this);var o={offset:new s(0,0),style:{border:"solid 1px #999",fontSize:"12px",padding:"2px",backgroundColor:"#fff"},visible:true,opacity:1,content:""};j=p.fill(j,o);this.setOptions(j);t.loadView("Label",this)},construct:function(){this.set("panes_",this.getPanes())},destroy:function(){this.notify("destroy_");
this.set("panes_",null)},draw:function(){this.notify("draw_")},changed:function(j){this.get(j)}});var e=f.union(i.checkInterface(q.LatLng),i.isInstanceOf(c.Marker),i.isNull),d=f.union(i.isString,i.isNull,i.isNumber,i.isHtmlControl),k=f.union(i.isObject,i.isString,i.isNull);q=f.union(i.checkInterface(q.Point),i.checkInterface(q.Size),i.isNull);f.publicProperties(c.Label,{style:k,position:e,offset:q,content:d,zIndex:i.isNumberOrNull,opacity:i.isNumber,visible:i.isBoolean})})(__MapNS__);(function(c){var s=c.LatLngBounds,q=c.MVCObject.checkers,f=__MapNSImpl__.Synchronize,t=c.MVCView,i=c.Overlay;c.GroundOverlay=__MapNSImpl__.Class(i,{initialize:function(l){i.apply(this);l=f.fill(l,{visible:true,opacity:1});this.setOptions(l);t.loadView("GroundOverlay",this)},construct:function(){this.set("panes_",this.getPanes())},destroy:function(){this.notify("destroy_");this.set("panes_",null)},draw:function(){this.notify("draw_")}});s=c.MVCObject.union(q.checkInterface(s),q.isNull);c.MVCObject.publicProperties(c.GroundOverlay,
{zIndex:q.isNumberOrNull,opacity:q.isNumber,visible:q.isBoolean,imageUrl:q.isStringOrNull,bounds:s})})(__MapNS__);(function(c){function s(B,x,u){var r=document.createElement("div");r.style.cssText="position:absolute;overflow:hidden;z-index:1;opacity:0.01;filter:alpha(opacity=1);";var b=document.createElement("img");b.style.cssText="positiion:absolute;-moz-user-select:none;-khtml-user-select:none;border:none;";b.unselectable="on";var h=function(n){l.stopEvent(n);return false};l.addDomListener(b,"selectstart",h);l.addDomListener(b,"dragstart",h);r.appendChild(b);b.src=x;x="qimgmapnavcontrol"+a++;h=null;b.setAttribute("usemap",
"#"+x);i.setSize(b,u);i.setSize(r,u);if(i.Browser().ie&&i.Browser().ie<9){b.setAttribute("useMap","#"+x);h=document.createElement('<map name="'+x+'"></map>')}else{h=document.createElement("map");h.setAttribute("name",x)}r.appendChild(h);B.appendChild(r);return h}function q(B,x,u){var r=document.createElement("area");r.href="javascript:void(0)";B.appendChild(r);r.setAttribute("shape","poly");r.setAttribute("coords",x.join(","));r.style.cursor="pointer";u&&(r.title=u);return r}function f(B,x,u,r){var b=
function(h){return function(){k(B,u,r[h])}};l.addDomListener(x,"mouseover",b(1));l.addDomListener(x,"mouseout",b(0));l.addDomListener(x,"mouseup",b(1));l.addDomListener(x,"mousedown",b(2))}function t(B,x,u){var r=u.get("map"),b=r.get("minZoom");r=r.get("maxZoom");var h={17:"street",11:"city",8:"prov",4:"country"},n;for(n in h){var y=parseInt(n);if(y>=b&&y<=r){var z=g[h[n]][x],D=document.createElement("div");D.style.position="absolute";i.setSize(D,[z[2],z[3]]);k(D,g.url,z);x==="right"?D.style.left=
"34px":D.style.left="-16px";D.style.bottom=9*(y-b)-3+"px";B.appendChild(D);l.addDomListener(D,"click",function(F){return function(){u.get("map").zoomTo(F)}}(n))}}}var i=__MapNSImpl__.Util,l=c.Event,p=__MapNSImpl__.Interfaces,e=c.MVCObject.checkers,d=__MapNSImpl__.Synchronize,k=i.setCssSprite,j=i.setDomCoord,o=__MapNSImpl__.RC.NavControl,a=0,g={url:__MapNSImpl__.Config.domain+"imgs/ctrl.png",background:[0,121,44,44],downhover:[44,121,44,44],lefthover:[88,121,44,44],uphover:[132,121,44,44],righthover:[176,
121,44,44],downpress:[220,121,44,44],leftpress:[264,121,44,44],uppress:[308,121,44,44],rightpress:[352,121,44,44],inback:[0,69,23,25],outback:[0,95,23,25],inhover:[26,69,23,25],outhover:[26,95,23,25],inpress:[53,69,23,25],outpress:[53,95,23,25],slideback:[170,76,24,13],slidehover:[170,92,24,13],slidepress:[170,107,24,13],ruler:[84,0,8,9],heat:[92,0,8,9],street:{right:[139,53,26,16],left:[112,53,26,16]},city:{right:[139,70,26,16],left:[112,70,26,16]},prov:{right:[139,87,26,16],left:[112,87,26,16]},
country:{right:[139,104,26,16],left:[112,104,26,16]}},m=[22,22,8,8,2,16,0,26,2,36,8,44],w=[22,22,44,8,50,16,52,26,50,36,44,44],v=[22,22,8,8,16,2,26,0,36,2,44,8],A=[22,22,8,44,16,50,26,52,36,50,44,44],C=__MapNSImpl__.Class(c.Control,{initialize:function(B){B=d.fill(B,{style:c.NavigationControlStyle.DEFAULT});c.Control.apply(this,[B]);this.set("content",this.getControlDom())},getControlDom:function(){var B=this.get("map");if(B){var x=B.get("minZoom"),u=B.get("maxZoom");B=document.createElement("div");
var r=document.createElement("div");r.style.cssText="position:relative;margin-bottom:10px;";var b=document.createElement("div");b.style.cssText="position:absolute;z-index:0;";var h=g.background;i.setSize(r,[h[2],h[3]]);i.setSize(b,[h[2],h[3]]);k(b,g.url,h);r.appendChild(b);B.appendChild(r);var n=s(r,g.url,[h[2],h[3]]);r=q(n,m,o.left);f(b,r,g.url,[g.background,g.lefthover,g.leftpress]);h=q(n,w,o.right);f(b,h,g.url,[g.background,g.righthover,g.rightpress]);var y=q(n,v,o.up);f(b,y,g.url,[g.background,
g.uphover,g.uppress]);n=q(n,A,o.down);f(b,n,g.url,[g.background,g.downhover,g.downpress]);b=document.createElement("div");b.style.cssText="position:relative;margin-left:11px;cursor:pointer;";b.title=o.zoomIn;var z=document.createElement("div");z.style.cssText="position:relative;margin-left:11px;cursor:pointer;";z.title=o.zoomOut;var D=g.inback,F=g.outback;i.setSize(b,[D[2],D[3]]);i.setSize(z,[F[2],F[3]]);k(b,g.url,D);k(z,g.url,F);D=[g.outback,g.outhover,g.outpress];f(b,b,g.url,[g.inback,g.inhover,
g.inpress]);f(z,z,g.url,D);B.appendChild(b);D=document.createElement("div");D.style.cssText="position:relative;cursor:pointer;";var E=g.ruler,G=g.heat;i.setSize(D,[0,(u-x+1)*E[3]+1]);var J=document.createElement("div");J.style.position="absolute";J.title=o.ruler;for(var I=-2;I<u-x;I++){var H=document.createElement("div");i.setSize(H,[E[2],E[3]]);k(H,g.url,E);J.appendChild(H)}F=document.createElement("div");F.style.position="absolute";F.title=o.ruler;for(I=-2;I<u-x;I++){H=document.createElement("div");
i.setSize(H,[G[2],G[3]]);k(H,g.url,G);F.appendChild(H)}i.setSize(J,[E[2],(u-x+1)*E[3]]);j(J,[17,-2]);i.setSize(F,[G[2],(u-x+1)*G[3]]);j(F,[17,-2]);var O=document.createElement("div");O.style.position="absolute";O.style.margin="auto 0px";O.title=o.slide;G=g.slideback;i.setSize(O,[G[2],G[3]]);k(O,g.url,G);j(O,[10,E[3]]);f(O,O,g.url,[g.slideback,g.slidehover,g.slidepress]);var M=document.createElement("div");M.style.display="none";B.appendChild(D);D.appendChild(J);D.appendChild(F);D.appendChild(O);D.appendChild(M);
B.appendChild(z);var L=this;E=function(Q){return function(){var P=L.get("map");if(P){var R=L.get("viewHeight_")/3,S=L.get("viewWidth_")/3,T=null;switch(Q){case 4:P.zoomIn();break;case 5:P.zoomOut();break;case 0:T=new c.Size(0,R);break;case 1:T=new c.Size(0,-R);break;case 2:T=new c.Size(S,0);break;case 3:T=new c.Size(-S,0);break;case 6:L.resume()}T&&P.moveBy(T)}}};var K;L=this;var N=function(Q,P){return function(){if(K){window.clearTimeout(K);K=null}if(L.getCurrentStyle().style===3)if(P==="none")K=
setTimeout(function(){Q.style.display=P;K=null},1E3);else{Q.style.display=P;K=null}}};l.addDomListener(y,"click",E(0));l.addDomListener(n,"click",E(1));l.addDomListener(r,"click",E(2));l.addDomListener(h,"click",E(3));l.addDomListener(b,"click",E(4));l.addDomListener(z,"click",E(5));l.addDomListener(D,"mouseover",N(M,""));l.addDomListener(b,"mouseover",N(M,""));l.addDomListener(z,"mouseover",N(M,""));l.addDomListener(M,"mouseover",N(M,""));l.addDomListener(D,"mouseout",N(M,"none"));l.addDomListener(b,
"mouseout",N(M,"none"));l.addDomListener(z,"mouseout",N(M,"none"));l.addDomListener(M,"mouseout",N(M,"none"));l.addListener(this,"zoomlevel_changed",function(){N(M,"")();N(M,"none")()});r=function(Q,P){if(!P||P[0]!==0||P[1]!==0){var R=i.getMouseXY(Q),S=i.getDomCoordinate(J);R=(1-(R[1]-S[1])/(S[3]-9))*(u-x)+x+1;L.get("map").zoomTo(Math.floor(R));L.zoomLevel_changed()}};l.addDomListener(J,"click",r);l.addDomListener(F,"click",r);i.enableDrag(O,D,{dragging:function(Q,P){if(P[0]!==0||P[1]!==0){var R=
i.getMouseXY(Q),S=i.getDomCoordinate(J),T=L.get("slideStart_"),U=L.get("slideEnd_");R=R[1]-S[1]+T-11;R<-2&&(R=-2);R>=U-9&&(R=U-9);O.style.top=R+"px";L.setHeat(R,S[3])}},dragend:r});return B}},setHeat:function(B){var x=this.get("slideStart_")-2;B=(B-x)/9;B=B>0?B:0;x=this.get("heat_").getElementsByTagName("div");for(var u=0;u<x.length;u++)if(u<=B){if(x[u])x[u].style.visibility="hidden"}else if(x[u])x[u].style.visibility="visible"},getCurrentStyle:function(){var B=this.get("style"),x=this.get("content"),
u,r,b=0,h=this.get("map"),n=h.get("maxZoom")-h.get("minZoom");h=g.background[3]+g.inback[3]+g.outback[3]+12;n=g.background[3]+g.inback[3]+g.outback[3]+n*g.ruler[3]+12;var y=g.background[3]+16;if(x.parentNode&&x.parentNode.parentNode&&x.parentNode.style){r=i.getDomCoordinate(x);x=i.getDomCoordinate(x.parentNode.parentNode);u=r[1]-x[1];r=r[0]-x[0]}if(B===0){B=this.get("viewHeight_")-u;B=B<h?1:B<n?2:3;B!==this.get("currentStyle")&&this.set("currentStyle",B)}if(this.get("viewWidth_")-r<y)b=1;return{style:B,
type:b}},draw:function(){var B=this.get("content"),x=this.get("map");if(B&&x){B=this.getCurrentStyle();var u=B.style,r=this.get("content").firstChild,b=r.nextSibling.nextSibling,h=b.firstChild;x=h.nextSibling;var n=x.nextSibling;tips=n.nextSibling;if(u==1){r.style.display="none";b.style.display="none"}else r.style.display="";if(u==2)b.style.display="none";if(u==3){b.style.display="";this.set("slideStart_",0);u=h.offsetHeight;if(i.Browser().ie&&i.Browser().ie<=6)u-=9;this.set("slideEnd_",u);this.set("slide_",
n);this.set("heat_",x)}B=B.type;if(tips.childNodes.length)tips.innerHTML="";B==1?t(tips,"left",this):t(tips,"right",this);this.zoomLevel_changed()}},zoomLevel_changed:function(){var B=this.get("zoomLevel"),x=this.get("slideEnd_"),u=this.get("map"),r=u.get("minZoom"),b=u.get("maxZoom");u=this.get("slideStart_")-2;if(typeof B!=="undefined"&&typeof x!=="undefined"){r=(B-r)/(b-r+1);B=this.get("slide_");x=x-Math.round(r*(x-u)+9);B.style.top=x+"px";this.setHeat(x)}},save:function(){var B=this.getMap();
if(B){this.set("center_",B.getCenter());this.set("zoomLevel_",B.getZoomLevel())}},resume:function(){var B=this.getMap(),x=this.get("center_");B&&x&&B.zoomTo(this.get("zoomLevel_"),x)},construct:function(){this.bindTo("zoomLevel",this.getMap());this.save()},destroy:function(){this.unbind("zoomLevel",this.getMap());this.set("center_",null)}});c.NavigationControlStyle={DEFAULT:0,SMALL:1,NORMAL:2,LARGE:3};p={content:null,margin:e.checkInterface(p.Size),align:e.isNumber,style:e.isNumber,map:null};c.NavigationControl=
C;c.MVCObject.publicProperties(C,p)})(__MapNS__);(function(c){var s=__MapNSImpl__.Synchronize,q=c.Control;c.CopyrightControl=__MapNSImpl__.Class(q,{initialize:function(f){var t=document.createElement("span");t.style.cssText="display:block;*width:1%;height:15px;font:11px arial,simsun;color:#333333;white-space:nowrap;filter:alpha(opacity=60 finishopacity=30 style=1 startx=0,starty=0,finishx=200,finishy=20) progid:DXImageTransform.Microsoft.gradient(startcolorstr=#FFFFFF,endcolorstr=#FFFFFF,gradientType=1);background-image:-moz-linear-gradient(right center , rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.45) 50px);background-image:-o-linear-gradient(right , rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.45) 50px);background-image:-webkit-gradient(linear,100 100,80 20,from(rgba(255, 255, 255, 0)),to(rgba(255, 255, 255, 0.45)))";
t.innerHTML=__MapNSImpl__.RC.Control.TencentText;f=s.fill(f,{content:t,zIndex:10});q.apply(this,[f])},draw:function(){var f=this.get("content"),t=this.get("map"),i=t.layers;if(i){var l=[];t=t.getBounds();for(var p=this.get("zoomLevel_"),e=0;e<i.getLength();e++){var d=i.getAt(e).get("copyrights");d&&l.push(d.getCopyrightNotice(t,p))}i=this.get("copySpan");if(!i){i=document.createElement("span");f.appendChild(i);this.set("copySpan",i)}i.innerHTML=l.join(",")}},save:function(){var f=this.getMap();if(f){this.set("center_",
f.getCenter());this.set("zoomLevel_",f.getZoomLevel())}},changed:function(f){switch(f){case "zoomLevel":case "center":case "baseLayer":this.redraw()}},construct:function(){var f=this.get("map");this.bindTo("zoomLevel",f);this.bindTo("center",f);this.bindTo("baseLayer",f);this.save()},destroy:function(){var f=this.get("map");this.unbind("zoomLevel",f);this.unbind("center_",f);this.unbind("baseLayer",f)}})})(__MapNS__);(function(c){var s=c.MVCObject.checkers,q=c.Control;MVCObject=c.MVCObject;Synchronize=__MapNSImpl__.Synchronize;c.ScaleControl=__MapNSImpl__.Class(q,{initialize:function(f){f=Synchronize.fill(f,{textColor:"#333333",barColor:"#333333",printable:true});var t=document.createElement("div");t.style.width="100px";var i=document.createElement("div"),l=document.createElement("div");i.style.cssText="font:11px arial,simsun;color:"+f.textColor+";text-align:center;";l.style.cssText="position:relative;height:8px;width:84px;";
var p=document.createElement("div");p.style.cssText="position:absolute;border:1px solid #ffffff;width:1px;height:6px;background:"+f.barColor+";font-size:0;line-height:0;";p.style.left=0;var e=document.createElement("div");e.style.cssText=p.style.cssText;e.style.left="81px";var d=document.createElement("div");d.style.cssText=p.style.cssText;d.style.left="2px";d.style.width="80px";d.style.height="2px";d.style.top="2px";d.style.borderLeft="none";d.style.borderRight="none";l.appendChild(p);l.appendChild(e);
l.appendChild(d);t.appendChild(i);t.appendChild(l);f.content=t;q.apply(this,[f]);this.set("text",i);this.set("rl",p);this.set("rr",e);this.set("rm",d)},construct:function(){var f=this.get("map");this.bindTo("center",f);this.bindTo("zoomLevel",f)},destroy:function(){this.unbind("center");this.unbind("zoomLevel")},changed:function(f){var t=this.get("rr"),i=this.get("rl"),l=this.get("rm"),p=this.get("text");switch(f){case "zoomLevel":case "center":if(!this.get("zoomLevel")||!this.get("center"))return;
i=this.get("center").getLat();f=this.get("zoomLevel");if(p)p.innerHTML=__MapNSImpl__.RC.Control.ScaleText[f];i=[52,52,52,52,52,41,82,82,82,65,65,65,52,52,52,41,82,82,82][f]/Math.cos(i/180);if(p){p.style.width=i+4+"px";l.style.width=i+"px";t.style.left=i+1+"px"}break;case "textColor":if(p){f=this.get("textColor");p.style.color=f}break;case "barColor":if(t&&l&&i){f=this.get("barColor");t.style.backgroundColor=f;i.style.backgroundColor=f;l.style.backgroundColor=f}}this.redraw()}});MVCObject.publicProperties(c.ScaleControl,
{textColor:s.isString,barColor:s.isString})})(__MapNS__);(function(c){var s=__MapNSImpl__.Util,q=__MapNSImpl__.Synchronize,f=c.Event,t=[];c.ContextMenuControl=__MapNSImpl__.Class(c.Control,{initialize:function(i){i=q.fill(i,{map:null,zIndex:100});var l=document.createElement("div"),p=document.createElement("div");p.style.cssText="position:absolute;z-index:1;border:1px solid #A8B7D2;background:#FFFFFF;display:none;padding:4px 0px 4px 0px;margin:0px 0px;-moz-box-shadow:2px 2px 8px #A8B7D2;-webkit-box-shadow:2px 2px 8px #A8B7D2;";var e=document.createElement("div");
e.style.cssText="position:absolute;background:black;opacity:0.2;filter:alpha(opacity=20);border:1px solid #A8B7D2;display:none;";var d=document.createElement("table");d.cellSpacing="0";d.cellPadding="0";var k=document.createElement("tbody");d.appendChild(k);p.appendChild(d);l.appendChild(p);l.appendChild(e);i.content=l;c.Control.apply(this,[i]);this.set("tbody_",k);this.set("menu_",p);this.set("shadow_",e);this.set("targets_",[]);this.set("items_",[]);this.set("itemIndex_",0);var j=this;i=function(){j.hide()};
f.addDomListener(document.body.parentNode||document.body,"click",i);f.addDomListener(document.body.parentNode||document.body,"contextmenu",i);f.addDomListener(p,"click",function(o){f.stopEvent(o)})},construct:function(){this.destroy();var i=this.get("map");if(i){var l=this;this.set("listener_",f.addListener(i,"mousedown",function(){l.hide()}));t.push(this)}},destroy:function(){for(var i=0,l;l=t[i];i++)if(l===this){t.splice(i,1);break}this.get("listener_")&&f.removeListener(this.get("listener_"))},
hide:function(){this.get("menu_").style.display="none";this.get("shadow_").style.display="none"},show:function(i){var l=this.get("map");if(l){this.set("position",i.qLatLng||null);var p=l.get("mapContainer_");p=s.getDomCoordinate(p);i=s.getMouseCoordinate(i);var e=new c.Point(i[0]-p[0],i[1]-p[1]),d=this.get("menu_");i=d.style;p=this.get("shadow_").style;i.display="";var k=d.offsetWidth;d=d.offsetHeight;l=l.getViewSize();var j=e.getX();e=e.getY();if(j-k>=0&&j+k>l.getWidth())j-=k;if(e-d>=0&&e+d>l.getHeight())e-=
d;i.left=j+"px";i.top=e+"px";if(s.Browser().ie!==0){p.left=j+1+"px";p.top=e+1+"px";p.width=k+"px";p.height=d+"px";p.display=""}for(l=0;i=t[l];l++)i!==this&&i.hide()}},addTarget:function(i){for(var l=this.get("targets_"),p=0,e;e=l[p];p++)if(e.target===i)return;p={target:i,listener:null};var d=this;p.listener=f.addListener(i,"contextmenu",function(k){d.show(k);f.stopEvent(k);return false});l.push(p)},removeTarget:function(i){for(var l=this.get("targets_"),p=0,e;e=l[p];p++)if(e.target===i){f.removeListener(e.listener);
l.splice(p,1);break}},addSeparator:function(){this.get("items_").push({content:"separator",type:1});var i=this.get("itemIndex_")+1;this.set("itemIndex_",i);this.renderItems();return i-1},addItem:function(i,l){this.get("items_").push({content:i,handler:l,type:0});var p=this.get("itemIndex_")+1;this.set("itemIndex_",p);this.renderItems();return p-1},removeItem:function(i){var l=this.get("items_");l[i]&&(l[i].content=null);this.renderItems()},disableItem:function(i){var l=this.get("items_");l[i]&&(l[i].disabled=
true);this.renderItems()},enableItem:function(){var i=this.get("items_");i[index]&&(i[index].disabled=false);this.renderItems()},renderItems:function(){for(var i,l,p=this,e=this.get("items_"),d=e.length-1;d>=0;--d)if(e[d].content){if(e[d].dom)l=e[d].dom;else{i=document.createElement("tr");l=document.createElement("td");i.appendChild(l);l.style.cssText="white-space:nowrap;font-size:12px;color:#4B6AA3;";e[d].dom=l;this.get("tbody_").appendChild(i)}f.clearListeners(l);if(e[d].type==0){l.innerHTML=e[d].content;
l.style.padding="3px 18px";l.style.margin="0px 0px";l.style.lineHeight="18px";if(e[d].disabled){l.style.color="#999999";l.style.cursor="default"}else{l.style.color="#4B6AA3";l.style.cursor="pointer";f.addDomListener(l,"mouseover",function(){this.style.color="#4B6AA3";this.style.background="#E9EDF4"});f.addDomListener(l,"mouseout",function(){this.style.color="#4B6AA3";this.style.background="#FFFFFF"});f.addDomListener(l,"click",function(k){return function(j){p.hide();k&&k(j,p.get("position"));f.stopEvent(j)}}(e[d].handler))}}else{l.height=
"1px";l.style.background="#E6ECF4"}}else{(i=e[d].dom)&&__MapNSImpl__.Util.removeNode(i.parentNode);e[d]=null}e=this.get("shadow_").style;d=this.get("menu_");e.width=d.offsetWidth+"px";e.height=d.offsetHeight+"px"}})})(__MapNS__);(function(c){c.GeocoderResult=function(){this.location=null;this.address="";this.addressComponents={streetNumber:"",street:"",district:"",city:"",province:""};this.similarResults=null}})(__MapNS__);(function(c){c.GeocoderStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT"}})(__MapNS__);(function(c){var s=c.BaseService,q=c.GeocoderResult,f=c.LatLng,t=c.GeocoderStatus;c.Geocoder=__MapNSImpl__.Class(s,{initialize:function(){s.apply(this);this.queryType="geoc"},geocode:function(i,l){i&&this.request({request:i,callback:l})},request:function(i){var l=c.MVCObject.checkers,p=i.request,e=[],d=p.address;p=p.location;if(!l.isNull(d)&&!l.isNull(p)){if(l.isString(d)){this.queryType="geoc";e.push("addr="+encodeURIComponent(d))}}else{if(l.isString(d)){this.queryType="geoc";e.push("addr="+encodeURIComponent(d))}if(l.isInstanceOf(f)(p)||
l.isInstanceOf(f)(d)){p=p||d;this.queryType="rgeoc";l=p.getLng();d=p.getLat();e.push("lnglat="+l+","+d)}}this.send(e,i)},onResult:function(i){var l=i.callback,p=i.request,e=i.object;i=new q;if(e){var d=e.info;e=e.detail;var k;k=d.error;switch(d.type){case 45:if(k==-2)k=t.NO_RESULTS;else if(k==0){var j=e.name||"",o=e.city||"",a=e.province||"",g=e.district||"";i.address=a+o+g+j;i.location=new f(e.pointy,e.pointx);i.similarity=e.similarity;i.pcd_conflict_flag=e.pcd_conflict_flag;i.gps_type=e.gps_type;
i.addressComponents={street:j,district:g,city:o,province:a,country:e.country||"\u4e2d\u56fd"};i.similarResults=[];k=t.OK}else if(k==-1)k=t.ERROR;else if(k==-3)k=t.OVER_QUERY_LIMIT;break;case 46:d=e.results;e=d.length;if(k==-2)k=t.NO_RESULTS;else if(e){var m="";for(var w=k="",v="",A="",C=0;C<e;C++){var B=d[C];switch(B.dtype){case "AD":m=B.name;break;case "ST":w=B.name;break;case "ST_NO":k=B.name;break;case "TOWN":v=B.name;break;case "VILLAGE":A=B.name}}i.address=m.replace(/,/g,"")+(k?k:w?w:v+A);i.location=
p.location;p=m.split(",");if(p.length==4){j=p[0];a=p[1];o=p[2];g=p[3]}if(p.length==3){j=p[0];a=p[1];o=p[1];g=p[2]}i.addressComponents={village:A,town:v,streetNumber:k,street:w,district:g,city:o,province:a,country:j};k=t.OK}else k=t.NO_RESULTS;break;case 1E4:k=t.ERROR;break;case 10004:k=t.INVALID_REQUEST;break;default:k=t.UNKNOWN_ERROR}}l&&l(i,k);delete l}})})(__MapNS__);(function(c){c.SearchMode={NORMAL:"NORMAL",BUS:"BUS"}})(__MapNS__);(function(c){c.SearchResult=function(){this.pois=[];this.totalNum=0;this.pageCapacity=10;this.pageIndex=0;this.cityList=null}})(__MapNS__);(function(c){c.SearchStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS",REGIONS:"REGIONS",CITIES:"CITIES"}})(__MapNS__);(function(c){var s=c.BaseService,q=c.MVCObject,f=c.LatLng,t=c.LatLngCircles,i=c.LatLngBounds,l=c.SearchResult,p=c.Poi,e=c.Region,d=c.SearchMode,k=c.SearchStatus,j=__MapNSImpl__.Config,o=c.Geocoder,a=[];c.SearchService=__MapNSImpl__.Class(s,{initialize:function(){s.apply(this);this.defaultCapacity=10;this.defaultPage=0;this.queryType=j.QueryType.POI},search:function(g,m){g&&this.request({request:g,callback:m})},request:function(g){var m=q.checkers,w=g.request,v=w.dataProvider,A=w.keyword,C=w.region,
B=w.level||11,x=w.noquery,u=w.forceBounds,r=w.searchMode,b=[],h="";if(!m.isNull(v))if(m.isString(v)){var n=v.split(";"),y=n.length;if(y>1)for(v=0;v<y;v++)h+="||"+encodeURIComponent(n[v])+"||";else h="||"+encodeURIComponent(v)+"||"}var z;if(m.isNull(C))b.push("c=1");else{if(m.isString(C)){b.push("c="+encodeURIComponent(C));b.push("l="+B)}this.queryType=j.QueryType.POI;if(!r||r===d.NORMAL){if(m.isInstanceOf(i)(C)){this.queryType=j.QueryType.SYN;y=C.getSouthWest();n=C.getNorthEast();z=y.getLng();y=y.getLat();
v=n.getLng();n=n.getLat();b.push("b="+z+","+y+","+v+","+n);z=C.getCenter();if(!u)this.queryType=j.QueryType.POI;b.push("l="+B)}if(m.isInstanceOf(t)(C)){this.queryType=j.QueryType.RN;z=C.getCenter();B=C.getRadius();u=z.getLng();n=z.getLat();b.push("px="+u);b.push("py="+n);b.push("r="+B);if(x||A=="*"){A="*";b.push("lc=8&ro=1")}}}}if(m.isString(A)){x=encodeURIComponent(A);if(h){b.push("sp=1");x=A+h}b.push("wd="+x)}A=w.pageIndex||this.defaultPage;w=w.pageCapacity||this.defaultCapacity;if(r===d.BUS){this.queryType=
"busls";b.push("tp=0")}b.push("pn="+A);b.push("rn="+w);if(m.isInstanceOf(i)(C)||m.isInstanceOf(t)(C)){var D=new o;w={location:z};a.push([w,this.queryType,b,g]);var F=this,E=function(){var G=a.shift();G&&D.geocode(G[0],function(J){F.queryType=G[1];b.push("c="+encodeURIComponent(J.addressComponents.city||1));E();F.send(G[2],G[3])})};E()}else this.send(b,g)},onResult:function(g){var m=g.callback,w=g.request,v=g.object;g=new l;if(v){var A=v.info;v=v.detail;var C;switch(A.type){case 6:case 11:case 16:case 17:case 49:var B=
v.pois;C=v.city;var x=B.length,u=[];if(x){for(v=0;v<x;v++){var r=new p,b=B[v];r.id=b.uid;r.name=b.name;r.latLng=new f(b.pointy,b.pointx);if(!w.searchMode||w.searchMode===d.NORMAL)b.addr&&(r.address=b.addr);!C&&(C={cname:w.region});C.cname&&(r.city=C.cname);b.phone&&(r.phone=b.phone);b.zip&&(r.postcode=b.zip);b.classes&&(r.category=b.classes);r.type=b.poitype;u.push(r)}g.pois=u;g.pageIndex=w.pageIndex||this.defaultPage;g.pageCapacity=w.pageCapacity||this.defaultCapacity;g.totalNum=A.total;w=new e;
w.name=C.cname;w.code=C.ccode;w.level=C.level;w.position=new f(C.pointy,C.pointx);g.region=w;g.cityList=[{city:C.cname,resultNums:A.total}];C=k.OK}else C=k.NO_RESULTS;break;case 8:w=v.result;A=[];for(v=0;v<w.length;v++){C=w[v];B=C.cities;if(B.length)for(x=0;x<B.length;x++){C=B[x];A.push({city:C.cname,resultNums:C.cnum})}else A.push({city:C.cname,resultNums:C.cnum})}g.cityList=A;C=k.CITIES;break;case 9:A=v.area;C=v.children;B=v.parent;w=new e;x=new e;x.code=B.ccode;x.name=B.cname;w.parent=x;w.name=
A.cname;w.code=A.ccode;w.level=A.level;w.position=new f(A.pointy,A.pointx);w.brief=v.brief;A=[];v=0;for(B=C&&C.length;v<B;v++){x=C[v];u=new e;u.name=x.cname;u.code=x.ccode;A.push(u)}w.children=A;g.region=w;C=k.REGIONS;break;case 1E4:C=k.ERROR;break;case 10004:C=k.INVALID_REQUEST;break;default:C=k.UNKNOWN_ERROR}}m&&m(g,C);delete m}})})(__MapNS__);(function(c){c.LineStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){c.LineType={SUBWAY:2,BUS:1,FERRY:"FERRY"}})(__MapNS__);(function(c){c.LineResult=function(){this.type=this.name=this.id="";this.distance=0;this.price=this.etime=this.stime="";this.time=this.stationNum=0;this.to=this.from="";this.path=null;this.stations=[]}})(__MapNS__);(function(c){var s=c.BaseService,q=c.LatLng,f=c.LatLngBounds,t=c.LineResult,i=c.Poi,l=c.LineStatus,p=c.MVCObject.checkers;c.LineService=__MapNSImpl__.Class(s,{initialize:function(){s.apply(this);this.queryType=Config.QueryType.DT},detail:function(e,d){e&&this.request({request:e,callback:d})},request:function(e){var d=e.request.lineId,k=[];p.isString(d)&&k.push("uid="+d);k.push("tp=3");this.send(k,e)},onResult:function(e){var d=e.callback,k=e.object;e=new t;if(k){var j=k.detail;switch(k.info.type){case 18:k=
j.poi;bounds=new f;if(k){e.id=k.uid;e.name=k.name;e.type=k.poitype;e.distance=k.dist;e.stime=k.stime;e.etime=k.etime;e.price=k.price;e.stationNum=k.snum;e.from=k.from;e.to=k.to;j=this.fromSegmentToPath(k.points);e.path=j.path;e.bounds=j.bounds;j=0;for(var o=k.stations,a=o.length;j<a;j++){k=new i;var g=o[j];k.id=g.uid;k.type=g.poitype;k.name=g.name;k.latLng=new q(g.pointy,g.pointx);e.stations.push(k)}j=l.OK}else j=l.NO_RESULTS;break;case 1E4:j=l.ERROR;break;case 10004:j=l.INVALID_REQUEST;break;default:j=
l.UNKNOWN_ERROR}}d&&d(e,j);delete d}})})(__MapNS__);(function(c){c.StationStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){c.StationResult=function(){this.type=this.name=this.id="";this.latLng=null;this.lines=[]}})(__MapNS__);(function(c){var s=c.BaseService,q=c.LatLng,f=c.StationResult,t=c.LineResult,i=c.StationStatus;checkers=c.MVCObject.checkers;Util=__MapNSImpl__.Util;c.StationService=__MapNSImpl__.Class(s,{initialize:function(){s.apply(this);this.queryType=Config.QueryType.DT},detail:function(l,p){l&&this.request({request:l,callback:p})},request:function(l){var p=l.request.stationId,e=[];checkers.isString(p)&&e.push("uid="+p);e.push("tp=1");this.send(e,l)},onResult:function(l){var p=l.callback,e=l.object;l=new f;
if(e){var d=e.detail;switch(e.info.type){case 19:e=d.poi;d=e.lines;var k=d.length;if(k){for(var j=0;j<k;j++){var o=new t,a=d[j];o.id=a.uid;o.name=a.name;o.stime=a.stime;o.etime=a.etime;o.from=a.from;o.to=a.to;l.lines.push(o)}l.id=e.uid;l.name=e.name;l.type=e.poitype;l.latLng=new q(e.pointy,e.pointx);d=i.OK}else d=i.NO_RESULTS;break;case 1E4:d=i.ERROR;break;case 10004:d=i.INVALID_REQUEST;break;default:d=i.UNKNOWN_ERROR}}p&&p(l,d);delete p}})})(__MapNS__);(function(c){c.DirectionsPolicy={LEAST_TIME:0,AVOID_HIGHWAYS:1,LEAST_DISTANCE:2,REAL_TRAFFIC:3,PREDICT_TRAFFIC:4}})(__MapNS__);(function(c){c.DirectionsTravelMode={DRIVING:"DRIVING",WALKING:"WALKING"}})(__MapNS__);(function(c){c.DirectionsResult=function(){this.routes=[];this.policy=0;this.end=this.start=null}})(__MapNS__);(function(c){c.DirectionsRoute=function(){this.bounds=null;this.legs=[];this.distance=this.duration=null}})(__MapNS__);(function(c){c.DirectionsLeg=function(){this.duration=this.distance=null;this.steps=[];this.path=[];this.start_address="";this.start_location=null;this.end_address="";this.end_location=null}})(__MapNS__);(function(c){c.DirectionsStep=function(){this.duration=this.distance=null;this.path=[];this.roadname="";this.end_location=this.start_location=null;this.instructions="";this.placemarks=[];this.cities=[];this.turning=null}})(__MapNS__);(function(c){c.DirectionsStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS",MULTI_DESTINATION:"MULTI_DESTINATION"}})(__MapNS__);(function(c){var s=c.BaseService,q=c.DirectionsResult,f=c.DirectionsStatus,t=c.DirectionsPolicy,i=c.DirectionsTravelMode,l=c.DirectionsRoute,p=c.DirectionsLeg,e=c.DirectionsStep,d=c.LatLng,k=c.Distance,j=c.Duration,o=c.Turning,a=c.Poi,g=c.LatLngBounds,m=__MapNSImpl__.Config,w=__MapNSImpl__.Util;c.DirectionsService=__MapNSImpl__.Class(c.BaseService,{initialize:function(){s.apply(this);this.routeIndex=0;this.queryType=m.QueryType.NAV},route:function(v,A){v&&this.request({request:v,callback:A})},request:function(v){var A=
v.request,C=A.region,B=[];checkers.isString(C)&&B.push("c="+encodeURIComponent(C));C=A.end;var x=A.time,u=A.time,r=A.policy;B.push("start="+this.fromDestToString(A.start));B.push("dest="+this.fromDestToString(C));!u&&(u=A.travelMode=i.DRIVING);switch(u){case "DRIVING":this.queryType=m.QueryType.NAV;break;case "WALKING":this.queryType=m.QueryType.WALK}!r&&(r=A.policy=t.LEAST_TIME);if(x&&(r===t.REAL_TRAFFIC||r===t.PREDICT_TRAFFIC))B.push("time="+x);B.push("cond="+r);this.send(B,v)},onResult:function(v){var A=
v.callback,C=v.request,B=v.object,x=new q;console.log(v);if(B){v=B.info;var u=B.detail,r;switch(v.type){case 44:var b=u.route[0];r=w.parseCoords(b.coors);var h=b.distance;b=b.segmentList;var n=u.bounds;u=b&&b.length;var y=new l,z=n.split(",");n=new d(z[1],z[0]);z=new d(z[3],z[2]);n=new g(n,z);z=new p;if(u){var D=new k;D.text=this.fromDistToString(B.distance);D.value=h;h=new j;h.text=this.fromTimeToString(v.time);h.value=v.time;z.distance=D;z.duration=h;z.path=r;for(B=0;B<u;B++){var F=b[B],E=new e,
G=F.coorStart;G=r.slice(G,G+F.coorNum);if(B==0){z.start_address=F.roadName;z.start_location=G[0]}if(B==u-1){z.end_address=F.roadName;z.end_location=G[G.length-1]}var J=new k;J.text=this.fromDistToString(F.roadLength);J.value=F.roadLength;E.distance=J;J=new j;J.text=this.fromTimeToString(parseInt(F.driveTime));J.value=parseInt(F.driveTime);E.duration=J;J=new o;J.text=F.action;J.latLng=G[G.length-1];for(var I=F.kp,H=[],O=0,M=I.length;O<M;O++){var L=new a,K=I[O];L.name=K.name;L.latLng=new d(K.pointy,
K.pointx);H.push(L)}E.roadname=F.roadName;E.start_location=G[0];E.end_location=G[G.length-1];E.instructions=F.textInfo;E.path=G;E.turning=J;E.cities=F.cities;E.placemarks=H;z.steps.push(E)}y.bounds=n;y.distance=D;y.duration=h;y.legs.push(z);x.start=this.fromDestToPoi(v.start);x.end=this.fromDestToPoi(v.dest);x.traffic=!!v.navtraffic;x.policy=C.policy;x.routes.push(y);r=f.OK}else r=f.NO_RESULTS;break;case 21:C=u.start;v=u.dest;x.start=[];B=0;for(r=C?C.length:0;B<r;B++){b=C[B];x.start.push(this.fromDestToPoi(b))}x.end=
[];B=0;for(r=v?v.length:0;B<r;B++){b=v[B];x.end.push(this.fromDestToPoi(b))}r=f.MULTI_DESTINATION;break;case 1E4:r=f.ERROR;break;case 10004:r=f.INVALID_REQUEST;break;default:r=f.UNKNOWN_ERROR}}A&&A(x,r);delete A}})})(__MapNS__);(function(c){c.ActionType={BUS:"BUS",SUBWAY:"SUBWAY",WALK:"WALK"}})(__MapNS__);(function(c){c.TransferAction=function(){}})(__MapNS__);(function(c){c.TransferResult=function(){this.plans=[];this.policy=0;this.city="";this.end=this.start=null}})(__MapNS__);(function(c){c.TransferPlan=function(){this.actions=[];this.bounds={};this.lines=[];this.walks=[];this.stations=[];this.distance=this.duration=null}})(__MapNS__);(function(c){c.TransferPolicy={LEAST_TIME:0,LEAST_TRANSFER:1,LEAST_WALKING:2,MOST_ONE:3,NO_SUBWAY:4}})(__MapNS__);(function(c){c.TransferStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS",NO_SUPPORT:"NO_SUPPORT",MULTI_DESTINATION:"MULTI_DESTINATION"}})(__MapNS__);(function(c){var s=c.BaseService,q=c.LatLng,f=c.LatLngBounds,t=c.Poi,i=c.LineResult,l=c.TransferResult,p=c.TransferPlan,e=c.TransferStatus,d=c.TransferPolicy,k=c.TransferAction,j=c.ActionType,o=c.LineType,a=c.DirectionsLeg,g=c.DirectionsStep,m=c.Distance,w=c.Duration,v=c.Turning,A=c.MVCObject.checkers,C=__MapNSImpl__.RC.Transfer,B=__MapNSImpl__.Config;c.TransferService=__MapNSImpl__.Class(s,{initialize:function(){s.call(this);this.queryType=B.QueryType.BUS},plan:function(x,u){x&&this.request({request:x,
callback:u})},request:function(x){var u=x.request,r=u.region,b=[];A.isString(r)&&b.push("c="+encodeURIComponent(r));r=u.end;var h=u.policy;b.push("start="+this.fromDestToString(u.start));b.push("dest="+this.fromDestToString(r));!h&&(h=u.policy=d.LEAST_TIME);A.isNull(h)||(h===d.NO_SUBWAY?b.push("nosub="+h):b.push("cond="+h));this.send(b,x)},onResult:function(x){var u=x.callback,r=x.request,b=x.object;x=new l;if(b){var h=b.info;b=b.detail;x.city=r.region;x.policy=r.policy;switch(h.type){case 15:var n=
b.length,y=[];if(n){for(r=0;r<n;r++){var z=new p,D=b[r],F=D.intervals,E=D.trans,G=[],J=[],I=[],H=[],O=new f,M=0,L=0,K=0;for(D=E.length;K<D;K++){var N=new k,Q=[],P=null;if(K>0){var R=F[K-1][0];P=new i;P.id=R.uid;P.name=R.name;P.type=R.type;Q.push(C[0]+P.name);var S=new m;S.value=R.distance;S.text=this.fromDistToString(R.distance);P.distance=S;P.stationNum=R.station_num;Q.push(C[1]+P.stationNum+C[2]);S=new w;S.value=R.time;S.text=this.fromTimeToString(R.time);P.duration=S;S=this.fromSegmentToPath(R.segment);
P.path=S.path;P.bounds=S.bounds;O.union(S.bounds);G.push(P);M+=R.distance;L+=R.time;N.data=P}S=E[K];var T,U=this.fromTranToLeg_(S);if(K==0){T=this.fromTranToStation_(S.geton);R=F[K][0];T.type=R.type;I.push(T)}if(K>0&&K<D-1){T=this.fromTranToStation_(S.getoff);R=F[K-1][0];T.type=R.type;I.push(T);T=this.fromTranToStation_(S.geton);R=F[K][0];T.type=R.type;I.push(T);Q.push(C[3]+S.getoff.name)}if(K==D-1){T=this.fromTranToStation_(S.getoff);R=F[K-1][0];T.type=R.type;I.push(T);Q.push(C[3]+S.getoff.name)}if(P){P.from=
E[K-1].geton.name;P.to=E[K].getoff.name;N.instructions=Q.join("\uff0c");N.type=j.BUS;if(P.type==o.SUBWAY)N.type=j.SUBWAY;H.push(N)}if(U.distance.value){N=new k;Q=[];Q.push(U.steps[0].instructions);Q.push(C[3]+(S.geton.name?S.geton.name:C[4]));N.instructions=Q.join("\uff0c");N.data=U;N.type=j.WALK;H.push(N)}J.push(U)}z.actions=H;z.lines=G;z.bounds=O;z.walks=J;z.stations=I;D=new m;D.value=M;D.text=this.fromDistToString(M);z.distance=D;D=new w;D.value=L;D.text=this.fromTimeToString(L);z.duration=D;y.push(z);
x.plans=y;x.start=this.fromDestToPoi(h.start);x.end=this.fromDestToPoi(h.dest)}h=e.OK}else h=e.NO_RESULTS;break;case 14:h=b.start;b=b.dest;x.start=[];r=0;for(D=h?h.length:0;r<D;r++){n=h[r];x.start.push(this.fromDestToPoi(n))}x.end=[];r=0;for(D=b?b.length:0;r<D;r++){n=b[r];x.end.push(this.fromDestToPoi(n))}h=e.MULTI_DESTINATION;break;case 1E4:h=e.ERROR;break;case 10004:h=e.INVALID_REQUEST;break;case 10006:h=e.NO_SUPPORT;break;default:h=e.UNKNOWN_ERROR}}u&&u(x,h);delete u},fromTranToStation_:function(x){var u=
new t;u.id=x.uid;u.name=x.name;u.latLng=new q(x.pointy,x.pointx);return u},fromTranToLeg_:function(x){var u=new a,r=new w,b=new m,h=x.walk;r.value=h.time;r.text=this.fromTimeToString(h.time);u.duration=r;b.value=h.distance;b.text=this.fromDistToString(h.distance);u.distance=b;var n=this.fromSegmentToPath(h.segment);u.path=n.path;var y=x.getoff;u.start_address=y.name;y=new q(y.pointy,y.pointx);u.start_location=y;x=x.geton;u.end_address=x.name;var z=new q(x.pointy,x.pointx);u.end_location=z;x=new g;
x.distance=b;x.duration=r;x.start_location=y;x.end_location=z;r=new v;r.text=__MapNSImpl__.RC.Direction[h.direction];r.latLng=y;x.turning=r;x.instructions=b.value?"\u5411"+r.text+"\u6b65\u884c\u7ea6"+x.distance.text:"";x.path=n.path;u.steps.push(x);return u}})})(__MapNS__);(function(c){c.LocationMode={CLIENT_IP:"CLIENT_IP",AREA_CODE:"AREA_CODE",LATLNG:"LATLNG",W3C_LOCATION:"W3C_LOCATION"}})(__MapNS__);(function(c){c.GeolocationStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){c.GeolocationResult=function(){this.name="";this.detail=this.latLng=null}})(__MapNS__);(function(c){var s=c.BaseService,q=c.LatLng,f=c.LocationMode,t=c.GeolocationResult,i=c.GeolocationStatus,l=c.MVCObject.checkers,p=__MapNSImpl__.Config;c.Geolocation=__MapNSImpl__.Class(s,{initialize:function(){s.apply(this);this.queryType=p.QueryType.POS},position:function(e,d){e&&this.request({request:e,callback:d})},request:function(e){var d=e.request,k=d.keyword;d=d.locationMode;var j=[],o="";if(k!==""&&!l.isNull(k)){if(l.isString(k))if(d)if(d===f.CLIENT_IP)o="ip";else if(d===f.AREA_CODE)o="acode";
else{if(d===f.LATLNG)o="lonlat"}else o=this.checkIP_(k)?"ip":"acode";else if(l.isInstanceOf(q)(k)){k=k.getLng()+","+k.getLat();o="lonlat"}j.push("wd="+k);j.push("tp="+o)}else this.queryType="gc";this.send(j,e)},onResult:function(e){var d=e.callback,k=e.object;e=new t;if(k){var j=k.detail;switch(k.info.type){case 4:case 31:k=j.cname;var o=j.path;if(k){e.name=k;e.latLng=new q(j.pointy,j.pointx);if(o){o.length==4&&(j=[o[3]?o[3].cname:"",o[2]?o[2].cname:"",o[1]?o[1].cname:"",o[0]?o[0].cname:""]);o.length==
3&&(j=[o[2]?o[2].cname:"",o[1]?o[1].cname:"",o[0]?o[0].cname:""]);o.length==2&&(j=[o[1]?o[1].cname:"",o[0]?o[0].cname:""]);o.length==1&&(j=[o[0]?o[0].cname:""]);e.detail=j.join(",")}j=i.OK}else j=i.NO_RESULTS;break;case 1E4:j=i.ERROR;break;case 10004:j=i.INVALID_REQUEST;break;default:j=i.UNKNOWN_ERROR}}d&&d(e,j);delete d},checkIP_:function(e){return/^(([01]?[\d]{1,2})|(2[0-4][\d])|(25[0-5]))(\.(([01]?[\d]{1,2})|(2[0-4][\d])|(25[0-5]))){3}$/.test(e)}})})(__MapNS__);(function(c){c.SuggestionMode={NORMAL:"NORMAL",BUS:"BUS",DISTRICT:"DISTRICT"}})(__MapNS__);(function(c){c.SuggestionStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){c.SuggestionResult=function(){}})(__MapNS__);(function(c){var s=c.BaseService,q=c.SuggestionResult,f=c.SuggestionStatus,t=__MapNSImpl__.Config,i=c.SuggestionMode;c.Suggestion=__MapNSImpl__.Class(s,{initialize:function(){s.apply(this);this.queryType=t.QueryType.SG},complete:function(l,p){l&&this.request({request:l,callback:p})},request:function(l){var p=l.request,e=p.suggestionMode,d=p.keyword;p=p.region;var k=[];if(checkers.isNull(p))k.push("c=1");else checkers.isString(p)?k.push("c="+encodeURIComponent(p)):k.push("c=1");d!==""&&!checkers.isNull(d)&&
k.push("wd="+encodeURIComponent(d));if(checkers.isNull(e))k.push("tp=0");else{e===i.NORMAL&&k.push("tp=0");e===i.BUS&&k.push("tp=1");e===i.DISTRICT&&k.push("tp=2")}this.send(k,l)},onResult:function(l){var p=l.callback,e=l.object;l=[];if(e){var d=e.detail;switch(e.info.type){case 5:if(e=d&&d.length){for(var k=0;k<e;k++){var j=d[k],o=new q,a=j.name,g=j.place,m=j.show,w=j.type,v=j.city.path;o.id=j.uid;o.text=a;o.region=g;o.highlight_text=m;o.poi_type=w;var A;if(v){v.length==4&&(A=[v[3]?v[3].cname:"",
v[2]?v[2].cname:"",v[1]?v[1].cname:"",v[0]?v[0].cname:""]);v.length==3&&(A=[v[2]?v[2].cname:"",v[1]?v[1].cname:"",v[0]?v[0].cname:""]);v.length==2&&(A=[v[1]?v[1].cname:"",v[0]?v[0].cname:""]);v.length==1&&(A=[v[0]?v[0].cname:""]);o.district=A.join(",")}l.push(o)}d=f.OK}else d=f.NO_RESULTS;break;case 1E4:d=f.ERROR;break;case 10004:d=f.INVALID_REQUEST;break;default:d=f.UNKNOWN_ERROR}}p&&p(l,d);delete p}})})(__MapNS__);(function(c){c.PoiStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){var s=c.BaseService,q=c.LatLng,f=c.Poi,t=c.PoiStatus;checkers=c.MVCObject.checkers;Config=__MapNSImpl__.Config;Util=__MapNSImpl__.Util;c.PoiService=__MapNSImpl__.Class(s,{initialize:function(){s.apply(this);this.queryType=Config.QueryType.DTS},detail:function(i,l){i&&this.request({request:i,callback:l})},request:function(i){var l=i.request.poiId,p=[];checkers.isString(l)&&p.push("uids="+l);p.push("tp=0");p.push("num=10");this.send(p,i)},onResult:function(i){var l=i.callback,p=i.object;
i=[];if(p){var e=p.detail;switch(p.info.type){case 60:p=e.pois;if(e=p.length){for(var d=0;d<e;d++){var k=new f,j=p[d];k.id=j.uid;k.name=j.name;k.latLng=new q(j.pointy,j.pointx);j.addr&&(k.address=j.addr);j.phone&&(k.phone=j.phone);k.type=j.poitype;j.zip&&(k.postcode=j.zip);j.classes&&(k.category=j.classes);j.average_price&&(k.average_price=j.average_price);j.comment_num&&(k.comment_num=j.comment_num);j.comment_level&&(k.comment_level=j.comment_level);j.special_rec&&(k.special_rec=j.special_rec);j.src&&
(k.source=j.src);i.push(k)}e=t.OK}else e=t.NO_RESULTS;break;case 1E4:e=t.ERROR;break;case 10004:e=t.INVALID_REQUEST;break;default:e=t.UNKNOWN_ERROR}}l&&l(i,e);delete l}})})(__MapNS__);(function(){QQMap=__MapNS__;QQMapImpl=__MapNSImpl__;(function(c,s){if(typeof c=="string"){for(var q=c.split("."),f=window,t=0;t<q.length;t++){var i=q[t];f[i]||(f[i]={});f=f[i]}for(;q=s.pop();){f[q]=__MapNS__[q];QQMap["Q"+q]=__MapNS__[q]}}})("soso.maps",["Point","Size","Bounds","Color","ALIGN","LatLng","LatLngBounds","LatLngCircles","Fx","CssFx","Animation","ObjectLoader","MVCObject","Event","MVCArray","Overlay","Control","MapType","MapTypeId","TileLayer","TileGridLayer","RoadMapLayer","SatelliteLayer",
"HybridLayer","TrafficLayer","InfoWindow","Polygon","Polyline","Circle","MarkerImage","MarkerShape","MarkerDecoration","Marker","Label","GroundOverlay","ContextMenuControl","Copyright","CopyrightCollection","CopyrightControl","NavigationControl","NavigationControlStyle","ScaleControl","Map","Poi","Distance","Duration","Turning","Region","PoiType","SearchMode","SearchStatus","SearchResult","SearchService","PoiStatus","PoiResult","PoiService","LineType","LineStatus","LineResult","LineService","StationStatus",
"StationResult","StationService","ActionType","TransferAction","TransferStatus","TransferPolicy","TransferPlan","TransferResult","TransferService","DirectionsTravelMode","DirectionsPolicy","DirectionsStatus","DirectionsLeg","DirectionsRoute","DirectionsResult","DirectionsService","DirectionsStep","Geocoder","GeocoderResult","GeocoderStatus","LocationMode","GeolocationStatus","GeolocationResult","Geolocation","SuggestionMode","SuggestionStatus","SuggestionResult","Suggestion"]);Util.domReady(function(){var c=
(new Date).getTime(),s=window[c]=new Image;s.onload=s.onerror=function(){window[c]=null};s.src="http://pr.soso.com/pingd?srctype=mapapi&tmp="+c.toString(36);s=null})})();
