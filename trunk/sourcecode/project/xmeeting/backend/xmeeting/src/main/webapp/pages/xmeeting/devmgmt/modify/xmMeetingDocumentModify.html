<h2 class="contentTitle" name="showTitle">Edit Type</h2>
<form name="pageForm" method="post" class="required-validate pageForm" onsubmit="return validateCallback(this, navTabAjaxDone);">
		<input type="hidden" name="xmmdGuid" id="xmmdGuid"/>
		<input type="hidden" name="xmmiGuid" id="xmmiGuid"/>
		<input type="hidden" name="navTabId" value="xmMeetingDocument" />
		<input type="hidden" name="callbackType" value="closeCurrent" />
		<input type="hidden" name="callBackMethod" value="xmMeetingDocumentSearch" />
	<div class="pageFormContent" layoutH="97">
<!-- 			<p> -->
<!-- 				<label>会议PID</label> -->
<!-- 				<input type="text" name="xmmiGuid" class="required" size="30" maxlength="20"/> -->
<!-- 			</p> -->
			<p>
				<label>文稿名称</label>
				<input type="text" name="xmmdName" class="required" size="30" maxlength="20"/>
			</p>
			<p>
				<label>文稿描述</label>
				<input type="text" name="xmmdDescription" class="required" size="30" maxlength="20"/>
			</p>
			<p>
				<label>文稿文件</label>
				<input type="hidden" name="xmmdFile" class="required"    />
			</p> 
			
			<p></p>
			<p></p>
			<p></p>
			 
			<div id="xmmdFileFileQueue" class="fileQueue"></div>  
			<input  type="file"  id="xmmdFileFile" name="xmmdFileFile"  
				uploader="/fwkweb/styles/uploadify/scripts/uploadify.swf"
				cancelImg="/fwkweb/styles/uploadify/cancel.png" 
				script="xmeeting_meetingdocument.uploadify"  
				fileQueue="xmmdFileFileQueue"  
				onComplete="xmMeetingDocument_uploadifyAllComplete"  
				fileExt="*.pdf;*.doc;*.xls;*.ppt;"
				fileDesc="*.pdf;*.doc;*.xls;*.ppt;"/>
	</div>
			
	<div class="formBar">
		<ul>
			<li><div class="buttonActive"><div class="buttonContent"><button type="submit" >保存</button></div></div></li>
			<li><div class="button"><div class="buttonContent"><button type="button" class="close">关闭</button></div></div></li>
		</ul>
	</div>
</form>
<script type="text/javascript">
	//通过tab url得到行主键，获取信息，自动填充form表单
	$(function(){
		var $form = findName("pageForm");
		var url = navTab._getTabUrl();
		var xmmdGuid=navTab._getParam("xmmdGuid"); 
		var xmmiGuid=navTab._getParam("xmmiGuid");
		findName('xmmiGuid').val(xmmiGuid);
		if(xmmdGuid){
			findName('showTitle').html('修改资料文件');
			doGetAjax(CPATH.domain_3 + "/rs/xmMeetingDocument/" +xmmdGuid ,null,function(data){$form.find("[name]").populate(data);});
			$form.attr('action',CPATH.domain_3 + '/rs/xmMeetingDocument/'+xmmdGuid+'?method=put');
		}else{
			findName('showTitle').html('新增资料文件');
			$form.attr('action',CPATH.domain_3 + '/rs/xmMeetingDocument');
		}
	}); 

	//
	function xmMeetingDocument_uploadifyAllComplete(event, queueID, fileObj, reposnse, data){   
		var jsonResponse=DWZ.jsonEval(reposnse);
		logger.info("xmMeetingDocument_uploadifyAllComplete---jsonResponse->"+jsonResponse); 
		findName('xmmdFile').val(jsonResponse.fileUrlPath );   
	}

</script>